{"version":3,"sources":["modules/common/DisplayRecipe.js","modules/common/IpfsDoc.js","modules/common/Cache/CacheLocalStorage.js","modules/common/Cache/CacheWindow.js","modules/common/Cache/index.js","modules/common/StarRating.js","modules/common/Messagebox.js","stores/DataStore.js","stores/SettingStore.js","modules/common/RoleSection.js","modules/common/Loading.js","modules/common/Engine.js","modules/common/IPFSEngine.js","modules/common/FingerPrinter.js","modules/common/AddressInput.js","modules/common/InfoHeader.js","modules/common/Logo.js","modules/common/IPFSImg.js","modules/shoppingCart/ShoppingCnt.js","modules/shoppingCart/AddOrder.js","modules/shoppingCart/MyCartList.js","modules/shoppingCart/ShoppingCartOprator.js","modules/shoppingCart/ShoppingCartWatcher.js","modules/mobileAuth/AuthHeadItem.js","modules/mobileAuth/AuthBody.js","modules/mobileAuth/MobileAuth.js","modules/mobileAuth/InfoCatch.js","modules/mobileAuth/ScanSignin.js","modules/Header.js","modules/Footer.js","modules/workshop/recipes/RecipeList.js","modules/workshop/recipes/RecipeSection.js","modules/workshop/recipes/RecipeEdit.js","modules/setting/Setting.js","modules/tpl/MenuItem.js","modules/menu/Items.js","modules/content/About.js","modules/content/Contact.js","modules/content/Home.js","modules/content/ComingSoon.js","modules/community/CommunityList.js","modules/community/CommunitySection.js","modules/community/CommunityResponse.js","modules/workshop/OperationSection.js","modules/workshop/plates/PlateList.js","modules/workshop/plates/PlateSection.js","modules/workshop/plates/EditPlate.js","modules/workshop/Workshop.js","modules/Orders/MyOrders.js","modules/Orders/OrderItem.js","modules/Orders/OrderInfo.js","modules/application/BecomeFoodie.js","modules/application/BecomeSupie.js","modules/Body.js","App.js","reportWebVitals.js","index.js"],"names":["DisplayRecipe","props","useState","record","setRecord","showPhotoList","photos","g","map","o","k","IPFSImg","ipfs","isCache","className","recordPhotos","rec","group","v","useEffect","Container","fluid","style","name","fontSize","id","ingredients","text","cooking","showRecrd","IpfsDoc","doc","setDoc","ipfsEngine","IPFSEngine","tpl","a","promiseIpfsJSON","x","CacheLocalStorage","lifeTime","getCachedCode","arr","localStorage","getItem","JSON","parse","e","setCachedCode","setItem","stringify","cleanOld","Date","getTime","removeItem","cleanNotInArr","code","setCache","data","getCache","this","CacheWindow","window","document","_cachedCode","Cache","Ins","toLowerCase","StarRating","value","readOnly","React","parseInt","rating","setRating","selection","setSelection","Star","marked","starId","role","hoverOver","event","val","target","getAttribute","Array","from","length","i","onMouseOut","onClick","onMouseOver","Mssagebox","message","title","textTransform","_sections","DataStore","createStore","state","recipes","plates","orders","menus","focuses","LastAction","action","type","section","indexOf","toString","push","idx","findIndex","splice","count","composeWithDevTools","_defaultSetting","ready","loading","screenModel","_watcher","fp","roles","operationRole","auth","AuthInfo","allRoles","desc","description","config","apiServer","webServer","sockerServer","ipfsServer","SettingStore","saveSettingApi","userInfo","authInfo","setTimeout","callback","fpPromise","FingerprintJS","load","get","fpRecord","storageName","visitorId","loadSettingApi","dispatch","RoleSection","exroles","comp","showException","myRoles","setMyRoles","Exroles","isection","filter","includes","exsection","loadMyRoles","getState","handleSubscribe","subscribe","compException","Messagebox","Loading","sts","setSts","Object","keys","Spinner","animation","size","Engine","prop","loadingOn","loadingOff","fetchApi","cfg","me","fetch","url","then","json","jsonData","err","status","catch","error","setOperationRole","saveLocalRecord","dt","DatabaseApi","apiCode","server","method","body","headers","loadStorageData","data0","defaultData","getStorageData","Promise","resolve","reject","downloadUri","res","console","log","promiseIpfsText","getIpfsAsync","getIpfJsonsAsync","promisePullQ","Q","promiseQ","publishCode","recipe","all","values","p","promiseSave","ipfsCache","_cacheExist","IPFS","host","uploadSVR","port","protocol","protocal","secs","ses","s","j","base64","add","promisePublish","code_record","FingerPrinter","result","AddressInput","defaultValue","inputAddress","setInputAddress","validAddress","setValidAddress","isValid","setIsValid","focused","setFocused","capitalize","str","charAt","toUpperCase","slice","upcase","formatedAddress","street_address1","city","postal_code","country","replace","verifyAddress","parser","passAddress","Form","Group","Control","required","placeholder","as","rows","onChange","onFocus","onBlur","Text","Row","Col","sx","InfoHeader","Navbar","expand","Brand","href","Logo","color","setBase64","Image","src","alt","ShoppingCnt","engine","cnt","setCnt","getOrderCount","shppingHandle","icon","faShoppingCart","Badge","position","top","AddOrder","Button","MyOrdersList","ShoppingCartOprator","item","order","operater","faMinus","faPlus","faTrashAlt","variant","caption","price","ShoppingCartWatcher","changed","AuthHeadItem","isAuth","setIsAuth","faUnlockAlt","faQrcode","AuthBody","qr","setQr","sockedId","setSockedId","SOCKET_URL","setAuthInfo","getAuthInfo","socket","socketClient","connect","on","fromSocket","signInTime","saveAuthInfo","disconnect","QRCode","toDataURL","width","quality","dark","light","authPage","infoPage","Alert","Heading","address","join","toLocaleDateString","MobileAuth","SocketID","useParams","success","setSuccess","isContinue","setIsContinue","Frame","info","warningPage","authCode","emit","unAuthentication","InfoCatch","InfoCode","ScanSignin","RequestID","inComeInfo","setIncomeInfo","cAuth","approveSignin","ComingInfoSection","errorPage","stopContinuePage","successPage","itIsAuthedPage","Header","expanded","setExpanded","navItem","design","linkTo","focus","foodie","exrole","supie","SelectedClass","useLocation","pathname","getNavLink","itemRole","itemExRole","Nav","Link","to","Toggle","Collapse","Footer","Year","getFullYear","RecipeList","items","setItems","list","loadList","key","faEdit","maxWidth","RecipeSection","inputFileHandle","useRef","handleFileChange","files","convertBase64","syncRec","removePhoto","file","fileReader","FileReader","readAsDataURL","onload","onerror","callParent","handleTextChange","InputGroup","hidden","ref","isdelete","removeSection","current","click","faPaperclip","fa","faTimesCircle","RecipeEdit","setTm","recipeCode","history","useHistory","userId","referenceCode","exit","save","publish","docType","publisher","resetIdx","onNameChange","height","overflowY","overflowX","inline","controlId","xs","align","faSave","faUpload","faUndo","Setting","myRole","setMyRole","setUserInfo","changeRole","faCheck","faTimes","Label","MenuItem","textAlign","v1","v2","getImages","maxHeight","objectFit","getContents","published","MenuItems","About","Contact","Home","promotion","poster","preload","autoPlay","loop","muted","lineHeight","faEgg","marginBottom","minHeight","ComingSoon","param","CommunityList","deleteRecord","publishPlate","bg","parent","CommunitySection","faArrowCircleRight","created","toISOString","CommunityResponse","new_data","ipfsCode","DesignHead","sort","b","showDesc","loadRoles","myR","opertionAsLink","PlateList","PlateSectioon","EditPlate","PlateSection","Workshop","tm","OperationSection","MyOrder","myList","MyCartList","setList","getList","OrderItem","itemCode","processData","version","OrderInfo","setPhotos","setContent","BecomeFoodie","setAddress","setDescription","phone","setPhone","submitApplication","onDescriptionChanged","onPhoneChanged","patt","test","disabled","faSearch","BecomeSupie","qualification","setQualification","onQualificationChanged","faCloudUploadAlt","Body","exact","path","MyOrders","App","loadReady","setloadReady","isDesktopOrLaptop","useMediaQuery","query","isBigScreen","isTabletOrMobile","isPortrait","isRetina","pageLoading","pageReady","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.cfc3beee.chunk.js","sourcesContent":["import React , {useState, useEffect} from 'react';\nimport { Container } from 'react-bootstrap';\nimport { IPFSImg } from '.';\n\nfunction DisplayRecipe(props) {\n  const [record, setRecord] = useState(null);\n\n  const showPhotoList = (photos, g) => {\n    return  photos.map((o, k)=>(<IPFSImg ipfs={o.ipfs} isCache={true}  key={k}  \n      className=\"m-1 bg-secondary iconsImage\"/>))\n  }\n  const recordPhotos = (rec, group) => {\n    let photos = [];\n    if (rec[group]) {\n      rec[group].map((v)=> {\n        photos = [...photos, ...v.photos];\n        return true;\n      })\n    }\n    return photos;\n  }\n\n  useEffect(()=> { \n    setRecord(props.record);\n  },[]);\n  const showRecrd = (record) => {\n    return (!record) ? '==': (<Container fluid={true} className={props.className} style={props.style}>\n        <div className=\"p-0\">\n          \n            <p className=\"p-0 pl-0 m-1\">\n              <b>{record.name}</b>\n\n              <br/>\n              <span><i style={{fontSize:'0.8rem'}}>Record id-: {record.id}, Publisher </i></span>\n            </p>\n            <p className=\"text-secondary p-1 pl-2 m-0\">\n              <i className=\"text-primary\">Ingredients:</i> \n              {record.ingredients.map((v, k)=>{  return v.text })}\n              <br/>\n              {showPhotoList(recordPhotos(record, 'ingredients'))}\n            </p>\n            <p className=\"text-secondary p-1 pl-2 m-0\">\n              <i className=\"text-primary\">Instruction:</i> \n              {record.cooking.map((v, k)=>{  return v.text })}\n              <br/>\n              {showPhotoList(recordPhotos(record, 'cooking'))}\n            </p>\n            <p className=\"text-secondary p-1 pl-2 m-0\">\n              <span className=\"text-secondary mr-2\">Published:</span>\n            </p>\n        </div>\n        <div className=\"clearfix p-0 m-0\"></div>\n      </Container>)\n  }\n  return showRecrd(record);\n}\nexport default DisplayRecipe;\n","import {useState, useEffect} from 'react';\nimport {  IPFSEngine } from '../common';\n\nfunction IpfsDoc(props) {\n  const [doc, setDoc] = useState(null);\n  const ipfsEngine = new IPFSEngine();\n  // const [tm, setTm] = useState(0);\n  const tpl = props.tpl;\n  useEffect(()=> {\n    (async ()=> {\n      const x = await ipfsEngine.promiseIpfsJSON(props.ipfs)\n      // const x = await loadIpfs();\n      setDoc(x);\n      // setTm(new Date().getTime());\n    })();\n  }, []);\n  return (!doc)? props.ipfs : tpl({record:doc, className: props.className, style:props.style})\n}\nexport default IpfsDoc;\n","class CacheLocalStorage {\n    constructor(lifeTime) {\n        this.lifeTime = (!lifeTime) ? 30000 :lifeTime;\n    }\n    getCachedCode = ()=> {\n        let arr = {};\n        try {\n            const v = localStorage.getItem('cachedCode');\n            arr =  (!v) ? {} : JSON.parse(v);\n        } catch (e) {}\n        return arr;\n    }\n    setCachedCode = (arr)=> {\n        localStorage.setItem('cachedCode', JSON.stringify(arr));\n    }\n    cleanOld = () => {\n        const arr = this.getCachedCode();\n        for (let o in arr) {\n            if (new Date().getTime() - arr[o] > this.lifeTime) {\n                delete arr[o];\n                localStorage.removeItem(o);\n            }\n        }\n        this.setCachedCode(arr);\n    }\n    cleanNotInArr = (code)=>{\n        const arr = this.getCachedCode();\n        if (!arr[code]) {\n            localStorage.removeItem(code);\n        }\n    }\n    setCache = (code, data)=> {\n        const arr = this.getCachedCode();\n        localStorage.setItem(code, data);\n        arr[code] = new Date().getTime();\n        this.setCachedCode(arr);\n    }\n    getCache = (code)=> {\n        this.cleanOld();\n        this.cleanNotInArr(code);\n        // console.log('storage', localStorage.getItem(code));\n        return localStorage.getItem(code);\n    }\n}\nexport default CacheLocalStorage;\n","class CacheWindow {\n    constructor(lifeTime) {\n        this.lifeTime = (!lifeTime) ? 60000 :lifeTime;\n    }\n    getCachedCode = ()=> {\n        return (!window.document._cachedCode) ? {} : window.document._cachedCode;\n    }\n    setCachedCode = (arr)=> {\n        window.document._cachedCode = arr;\n    }\n    cleanOld = () => {\n        const arr = this.getCachedCode();\n        for (let o in arr) {\n            if (new Date().getTime() - arr[o] > this.lifeTime) {\n                delete arr[o];\n                delete window.document['__'+o];\n            }\n        }\n        this.setCachedCode(arr);\n    }\n    setCache = (code, data)=> {\n        const arr = this.getCachedCode();\n        window.document['__'+code] = data;\n        arr[code] = new Date().getTime();\n        this.setCachedCode(arr);\n    }\n    getCache = (code)=> {\n        this.cleanOld();\n        // console.log('win', window.document['__'+code]);\n        return window.document['__'+code];\n    }\n}\nexport default CacheWindow;\n","import CacheLocalStorage from './CacheLocalStorage';\nimport CacheWindow from './CacheWindow';\n\nclass Cache {\n    constructor(code, lifeTime) {\n        switch (code.toLowerCase()) {\n            case 'localstorage': \n                this.Ins = new CacheLocalStorage(lifeTime);\n                break;\n            case 'window': \n                this.Ins = new CacheWindow(lifeTime);\n                break;\n            default:\n                this.Ins = null;\n        }\n    }\n    setCache = (code, data)=> {\n        if (this.Ins) this.Ins.setCache(code, data);\n    }\n    getCache = (code)=> {\n        return (!this.Ins) ? null : this.Ins.getCache(code);\n    }\n}\nexport default Cache;\n","import React from 'react';\n\nconst StarRating = ({ value, readOnly }) => {\n  const [rating, setRating] = React.useState(parseInt(value, 10) || 0);\n  const [selection, setSelection] = React.useState(0);\n\n  const Star = ({ marked, starId }) => { //'\\u2606'\n    return (\n      <span data-star-id={starId} className=\"star\" role=\"button\">\n        {marked ? '\\u2605' : '\\u2606'}\n      </span>\n    );\n  };\n\n  const hoverOver = event => {\n  let val = 0;\n    if (event && event.target && event.target.getAttribute('data-star-id'))\n    val = event.target.getAttribute('data-star-id');\n    setSelection(val);\n  };\n  return (!readOnly) ? (\n    <div\n      onMouseOut={() => hoverOver(null)}\n      onClick={e => setRating(e.target.getAttribute('data-star-id') || rating)}\n      onMouseOver={hoverOver}\n    >\n      {Array.from({ length: 5 }, (v, i) => (\n        <Star\n          starId={i + 1}\n          key={`star_${i + 1}`}\n          marked={selection ? selection >= i + 1 : rating >= i + 1}\n        />\n      ))}\n    </div>\n  ) : (\n    <div>\n      {Array.from({ length: 5 }, (v, i) => (\n        <Star\n          starId={i + 1}\n          key={`star_${i + 1}`}\n          marked={selection ? selection >= i + 1 : rating >= i + 1}\n        />\n      ))}\n    </div>\n  );\n};\nexport default StarRating;\n","import React from 'react';\nimport { Container } from 'react-bootstrap';\n\nconst Mssagebox = ({ message, title, className }) => {\n  return (<Container className={className + ' rounded p-3 message-box grid-bg'}>\n      <b style={{textTransform: 'capitalize'}}>{title}</b>\n      <h3 className=\"text-secondary m-3 p-3\">{message}</h3>\n    </Container>);\n};\nexport default Mssagebox;\n","import { createStore } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nconst _sections = ['recipes', 'plates', 'orders', 'menus', 'focuses'];\nconst reducer = (state = {data: {recipes:[], plates:[], orders:[], menus:[], focuses:[]}, LastAction:null}, action) => {\n  state.LastAction = action.type;\n  const section = (_sections.indexOf(action.section) === -1) ? null : action.section;\n  switch(action.type) {\n    case 'updateLocal':\n    case 'updateApi':\n      if (section) {\n        if (action.data.id === 'new') {\n            action.data.id = new Date().getTime().toString();\n            state.data[section].push(action.data);\n        } else {\n            const idx = state.data[section].findIndex((v)=> v.id === action.data.id);\n            state.data[section][idx] = action.data;\n        }\n        localStorage.setItem('localData', JSON.stringify(state.data));\n      }\n      return state;\n    case 'deleteLocal':\n    case 'deleteApi':\n      if (section) {\n          const idx = state.data[section].findIndex((v)=>  v.id === action.data.id);\n          if  (idx !== -1 ) state.data[section].splice(idx, 1);\n          localStorage.setItem('localData', JSON.stringify(state.data));\n      }\n      return state;\n  \n    case 'publishPlate':\n      const idx = state.data.focuses.findIndex((v)=>  v.id === action.data.id);\n      if  (idx !== -1 ) {\n        delete state.data.focuses[idx].data;\n        // state.data.menus = [state.data.focuses[idx]]\n        state.data.menus.push(state.data.focuses[idx]);\n        state.data.focuses.splice(idx, 1);\n      }\n      localStorage.setItem('localData', JSON.stringify(state.data));\n      return state;\n\n    case 'loadLocal':\n    case 'loadApi':\n      state.data = action.data;\n      return state;\n    case 'publish':\n      \n      action.data.id = new Date().getTime().toString();\n      state.data.focuses.push(action.data);\n      localStorage.setItem('localData', JSON.stringify(state.data));\n      return state;\n\n    case 'addShoppingCartItem':\n      state.LastAction = 'shopping';\n      ((state)=>{\n        const idx = state.data.orders.findIndex((v)=>  v.code === action.data.code);\n        if  (idx === -1 ) {\n          state.data.orders.push({code: action.data.code, count: 1});\n        } else {\n          state.data.orders[idx].count = state.data.orders[idx].count + 1;\n        }\n        localStorage.setItem('localData', JSON.stringify(state.data));\n      })(state)\n      return state;\n\n    case 'updateShoppingCartItem':\n      state.LastAction = 'shopping';\n      return ((state)=>{\n        const idx = state.data.orders.findIndex((v)=>  v.code === action.data.code);\n        if  (idx !== -1 ) {\n          state.data.orders[idx].count = (action.data.count >= 0) ? action.data.count : state.data.orders[idx].count;\n        } \n        localStorage.setItem('localData', JSON.stringify(state.data));\n        return state;\n      })(state)\n\n    case 'removeShoppingCartItem':\n      state.LastAction = 'shopping';\n      return ((state)=>{\n        const idx = state.data.orders.findIndex((v)=> v.code === action.data.code);\n        if  (idx !== -1 )  state.data.orders.splice(idx, 1);\n        localStorage.setItem('localData', JSON.stringify(state.data));\n        return state;\n      })(state)\n\n    case 'initShoppingCart':\n      state.LastAction = 'shopping';\n      return ((state)=>{\n        state.data.orders = [];\n        localStorage.setItem('localData', JSON.stringify(state.data));\n        return state\n      })(state)\n\n    default:\n      return state;\n  }\n};\nconst DataStore = createStore(reducer, composeWithDevTools());\n\nexport default DataStore;\n","import { createStore } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport  FingerprintJS  from '@fingerprintjs/fingerprintjs'\n\nconst _defaultSetting = {ready: false, loading: {}, screenModel:{}, _watcher:'',\n      fp : '1234',\n      data : {roles:[], operationRole:'', screenModel:{}, auth:false, AuthInfo: {}},\n      allRoles : [\n        {id:1, code:'foodie', desc:'Foodie', description:'Foodie'},\n        {id:2, code:'supie', desc: 'Food supplier', description:'Food supplier / Restaurent / Grocery'}\n      ],\n      config: {\n        apiServer     : 'http://142.93.73.66:3001',\n        webServer     : 'http://192.168.86.126:5000',\n        sockerServer  : 'http://142.93.73.66:3001/dishFu',\n        ipfsServer    :  \"//gateway.ipfs.io/ipfs/\"\n      }\n  };\n\nconst reducer = (state = _defaultSetting, action) => {\n  state._watcher = '';\n  switch(action.type) {\n    /* --- Api action --> */\n    case 'saveRoles':\n      state.data.roles = action.roles;\n      state._watcher = 'role';\n      saveSettingApi(state.data);\n      return state;\n\n    case 'saveUserInfo':\n      state.data.userInfo = action.userInfo;\n      \n      saveSettingApi(state.data);\n      return state;\n\n    case 'saveAuthInfo':\n      state.data.authInfo = {...action.data};\n      delete state.data.authInfo.auth;\n      state.data.auth = action.data.auth;\n      state.data.roles = (!action.data || !action.data.roles) ? [] : action.data.roles;\n      state._watcher = 'auth';\n      saveSettingApi(state.data);\n      return state;\n\n\n    case 'updateOperationRole':\n      state._watcher = 'role';\n      state.data.operationRole = action.operationRole;\n      saveSettingApi(state.data);\n      return state;\n\n    /* --- None api action  --> */\n    case 'loadScreenModel':\n      state.screenModel = action.screenModel;\n      return state;\n\n    case 'addLoading':\n      state._watcher = 'loading';\n      state.loading[action.id] = new Date().getTime();\n      return state;\n    case 'removeLoading':\n      state._watcher = 'loading';\n      delete state.loading[action.id];\n      return state;\n\n    case 'initStore':\n      state.data = action.data;\n      state._watcher = 'afterInit';\n      return state;\n\n    default:\n      return state;\n  }\n};\nconst SettingStore = createStore(reducer, composeWithDevTools());\n\n/* --- simulated api ----> */\n\nconst loadSettingApi = async (callback) =>{\n  const fpPromise = FingerprintJS.load();\n  const fp = await fpPromise\n  const fpRecord = await fp.get()\n  setTimeout(\n    ()=>{\n      const storageName = 'localSettingData';\n      let v = _defaultSetting.data;\n      try {\n        v.visitorId = fpRecord.visitorId;\n        v = (!localStorage.getItem(storageName)) ? _defaultSetting.data : JSON.parse(localStorage.getItem(storageName))\n      } catch(e) {}\n      if (typeof callback === 'function') {\n        callback(v);\n      }\n    }, 200\n  );\n}\nconst saveSettingApi = (data) =>{\n  setTimeout(\n    ()=>{\n      localStorage.setItem('localSettingData',  JSON.stringify(data));\n    }, 500\n  );\n}\n\n/* <--- simulated api */\n\n\nloadSettingApi((data)=>{\n  SettingStore.dispatch({\n    type: 'initStore',\n    data : data\n  });\n});\n\n\n\nexport default SettingStore;\n","import React, {useState, useEffect} from 'react';\nimport { SettingStore } from \"../../stores\";\nimport { Messagebox } from \"../common\";\n\nfunction RoleSection({roles, exroles, comp, showException}) {\n  const [myRoles, setMyRoles] = useState([]);\n  const Exroles = (!exroles) ? [] : exroles;\n  \n  const isection = roles.filter(x => [...myRoles, 'all'].includes(x));\n  const exsection  = Exroles.filter(x => [...myRoles].includes(x));\n  \n  const loadMyRoles = () => {\n    setMyRoles( (!SettingStore.getState().data.authInfo || !SettingStore.getState().data.authInfo.roles) ? \n      [] : SettingStore.getState().data.authInfo.roles\n    );\n  }\n  useEffect(()=> {\n    const handleSubscribe =  SettingStore.subscribe(() => {\n        if (SettingStore.getState()._watcher === 'role' || SettingStore.getState()._watcher === 'auth') {\n          loadMyRoles();\n        }\n    });\n    loadMyRoles();\n    return ()=> {\n      handleSubscribe();\n    }\n  }, []);\n\n  const compException = (<div className=\"p-3\"><Messagebox message=\"Missing required roles\" /></div>)\n  return  (!isection.length || !!exsection.length) ? ((!showException) ? '' : compException) : comp\n}\nexport default RoleSection;\n","import React, { useState, useEffect} from 'react';\nimport { Spinner } from 'react-bootstrap';\nimport { SettingStore } from '../../stores/';\n\nfunction Loading() {\n  const [ sts, setSts] = useState(0);\n\n  useEffect(()=>{\n    const handleSubscribe = SettingStore.subscribe(() => {\n      if (SettingStore.getState()._watcher === 'loading') {\n         setSts(Object.keys(SettingStore.getState().loading).length);\n      }\n    });\n    return ()=> {\n      handleSubscribe();\n    }\n\n  },[]);\n  \n  return (\n  <div className={(sts) ? 'loading' : 'no-loading'}>\n      <Spinner animation=\"border\" size=\"md\" className=\"loading-text\"/>\n  </div>\n  )\n}\nexport { Loading }\n","import { SettingStore, DataStore } from '../../stores';\n\nclass Engine {\n    constructor(prop) {\n        this.id = new Date().getTime();\n        this.defaultData = {recipes:[], plates:[], orders:[], menus:[], focuses:[]};\n        this.server = SettingStore.getState().config.apiServer;\n    }\n    loadingOn = ()=> {\n        SettingStore.dispatch({type:'addLoading', id: this.id});\n    }\n    loadingOff = ()=> {\n        SettingStore.dispatch({type:'removeLoading', id: this.id});\n    }\n    fetchApi = async (cfg, callback)=>{\n        this.loadingOn();\n        const me = this;\n        fetch(cfg.url, {}).then((v)=> {\n            return v.json()\n        }).then((jsonData, err)=>{\n            if (jsonData.status === 200) {\n                me.loadingOff();\n                callback(jsonData.data);\n            } else {\n                me.loadingOff();\n            }\n        }).catch((error)=> {\n            me.loadingOff();\n          });;\n    }\n\n    setOperationRole = (role)=>{\n        SettingStore.dispatch({\n            type: 'updateOperationRole',\n            operationRole: role\n        });\n    }\n\n    saveLocalRecord = (dt, callback)=>{\n        const me = this;\n        me.loadingOn();\n        setTimeout(()=>{\n            DataStore.dispatch(dt);\n            setTimeout(()=> {\n                callback(DataStore.getState().data);\n                me.loadingOff();\n            }, 100)\n            \n        }, 3000)\n     }\n     saveLocalRecord = (dt, callback)=>{\n        const me = this;\n        me.loadingOn();\n        setTimeout(()=>{\n            DataStore.dispatch(dt);\n            setTimeout(()=> {\n                callback(DataStore.getState().data);\n                me.loadingOff();\n            }, 100)\n            \n        }, 3000)\n     }\n     DatabaseApi = (apiCode, dt, callback)=>{\n        const me = this;\n        fetch(me.server + '/api/' + apiCode, {\n            method: 'POST',\n            body: JSON.stringify(dt),\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            }\n        }).then(v=>v.json()).then((data)=> {\n            callback(data);\n        }).catch((err) => {\n            callback(err);\n        });\n     }\n\n    loadStorageData = (cfg, callback)=>{\n        const me = this;\n        this.loadingOn();\n        let data0 = this.defaultData;\n        try {\n            data0 =  (!localStorage.getItem('localData')) ? this.defaultData : JSON.parse(localStorage.getItem('localData'));\n        } catch (e) {}\n\n        DataStore.dispatch({\n            type: 'loadLocal',\n            data : data0\n        });\n        me.loadingOff();\n        callback();\n        return true;\n    }\n\n    getStorageData = (cfg, callback)=>{\n        const me = this;\n        const data = DataStore.getState();\n        me.loadingOff();\n        callback(data.data);\n        return true;\n    }\n}\n\nexport default Engine;","import Cache   from './Cache';\nimport IPFS from 'ipfs-mini';\nimport { SettingStore } from '../../stores';\n\nclass IPFSEngine {\n    constructor(prop) {\n        this.downloadUri = SettingStore.getState().config.ipfsServer;\n        this.uploadSVR = {\n            host: 'ipfs.infura.io',\n            port:5001,\n            protocal: 'https'\n        }\n        this.ses = ['cooking', 'ingredients', 'plates'];\n    }  \n    promiseIpfsJSON = async (code)=> {\n      return new Promise((resolve, reject) => {\n        fetch(this.downloadUri +code)\n        .then(res => {\n          return res.json()\n        })\n        .then(\n          (data) => {\n            resolve(data);\n          },\n          (err) => {\n            reject(err);\n            console.log('err=>', err);\n          }\n        )\n      });\n    } \n    promiseIpfsText = async (code)=> {\n      return new Promise((resolve, reject) => {\n        fetch(this.downloadUri +code)\n        .then(res => {\n          return res.text()\n        })\n        .then(\n          (data) => {\n            resolve(data);\n          },\n          (err) => {\n            reject(err);\n            console.log('err=>', err);\n          }\n        )\n      });\n    } \n    getIpfsAsync = async (code, callback)=> {\n      fetch(this.downloadUri +code)\n      .then(res => {\n        return res.text()\n      })\n      .then(\n        (data) => {\n          callback(data);\n        },\n        (err) => {\n          callback(false);\n        }\n      )\n    } \n    getIpfJsonsAsync = async (code, callback)=> {\n      fetch(this.downloadUri +code)\n      .then(res => {\n        return res.json()\n      })\n      .then(\n        (data) => {\n          callback(data);\n        },\n        (err) => {\n          callback(false);\n        }\n      )\n    } \n\n    promisePullQ = async (Q)=> {\n        const promiseQ = [];\n        for (let i=0; i < Q.length; i++) {\n            promiseQ[i] = new Promise((resolve, reject) => {\n            fetch(this.downloadUri +  Q[i].publishCode).then(v=>v.json()).then((data)=> {\n                Q[i].data = data;\n                resolve(Q[i]);\n            }).catch(err => { \n                reject('reject_' +  Q[i].recipe + '-'  + err.message);\n            });\n            });\n        }\n        const p = await Promise.all(promiseQ).then((values) => {\n            return values;\n        }).catch(error => {\n            console.error(error.message)\n            return [];\n        });\n        return p;\n    }\n    promiseSave = async (record)=> {\n        const ipfsCache = new Cache((document._cacheExist) ? 'window' : 'localStorage');\n        const ipfs = new IPFS({ host: this.uploadSVR.host, port: this.uploadSVR.port, protocol: this.uploadSVR.protocal });\n\n        const promiseQ = [];\n        const secs = this.ses;\n        \n        for (let s=0; s < secs.length; s++) {\n          const v = record[secs[s]];\n          if (v) {\n            for (let i=0; i < v.length; i++) {\n              for (let j=0; j < v[i].photos.length; j++) {\n                if (v[i].photos[j].base64) {\n                  \n                  const p = new Promise((resolve, reject) => {\n                    ipfs.add(v[i].photos[j].base64).then((code)=> {\n                      ipfsCache.setCache(code, v[i].photos[j].base64);\n                      v[i].photos[j] = { base64 :'', ipfs : code };\n                      resolve('resolve_' + secs[s] + '-' + code);\n                    }).catch(err => { \n                      reject('reject_' +  secs[s] + '-'  + err.message);\n                    });\n                  });\n                  promiseQ.push(p);\n                }\n              }\n            }\n          }\n        }\n        const p = await Promise.all(promiseQ).then((values) => {\n            return values;\n        }).catch(error => {\n            console.error(error.message)\n            return [];\n        });\n        return p;\n    }\n    promisePublish = async (record, callback)=> {\n        await this.promiseSave(record);\n        const ipfs = new IPFS({ host: this.uploadSVR.host, port: this.uploadSVR.port, protocol: this.uploadSVR.protocal });\n        ipfs.add(JSON.stringify(record)).then((code_record)=> {\n            callback(code_record);\n        });\n    }\n}\n\nexport default IPFSEngine;","import { SettingStore, DataStore } from '../../stores';\n// -- https://github.com/fingerprintjs/fingerprintjs\nimport  FingerprintJS  from '@fingerprintjs/fingerprintjs'\n\nclass FingerPrinter {\n    constructor(prop) {\n        this.visitorId = null;\n    }\n    load = async () => {\n        // Get the visitor identifier when you need it.\n        const fpPromise = FingerprintJS.load();\n        const fp = await fpPromise\n        const result = await fp.get()\n        \n        // This is the visitor identifier:\n        this.visitorId = result.visitorId\n        return this.visitorId;\n        console.log('a->', this.visitorId)\n    }\n}\n\nexport default FingerPrinter;","import React , { useState, useEffect } from 'react';\nimport { Form, Row, Col } from 'react-bootstrap';\nimport parser from 'parse-address-string';\n\nfunction AddressInput(props) {\n  const [inputAddress, setInputAddress] = useState(props.defaultValue);\n  const [validAddress, setValidAddress] = useState({});\n  const [isValid, setIsValid] = useState(false);\n  const [focused, setFocused] = useState(false);\n\n  const onAddressChange = (e)=> {\n    e.target.value = e.target.value\n    verifyAddress(e.target.value);\n  }\n  const onAddressBlur = (e)=> {\n    setFocused(false);\n    if (isValid) {\n      e.target.value=formatedAddress(validAddress);\n    } else {\n      e.target.value = '';\n    }\n    setInputAddress(formatedAddress(validAddress));\n  }\n  const capitalize = (str) => {\n    return !str? '' : str.charAt(0).toUpperCase() + str.slice(1)\n  }\n  const upcase = (str) => {\n    return !str? '' : str.toUpperCase()\n  }\n\n  const formatedAddress = (o) =>{\n    return (capitalize(o.street_address1)  +  ',' + capitalize(o.city) +  ',' + upcase(o.state) + ' ' + upcase(o.postal_code) +\n    upcase((o.country === 'USA') ? '' : o.country)).replace(/\\s+/ig, \" \");\n  }\n  const verifyAddress = (inputAddress)=> {\n    parser(inputAddress, function(err,o){\n      o.country = (!o.country) ? 'USA' : o.country;\n      setValidAddress(o)\n      if (!!o.street_address1 && !!o.city && !!o.postal_code && !!o.state && !err) {\n        props.passAddress(formatedAddress(o));\n        setIsValid(true);\n      } else {\n        props.passAddress('');\n        setIsValid(false);\n      }\n    })\n    return true;\n}\n  useEffect(()=> {\n   }, []);\n   return   (<Form.Group>\n      <Form.Control defaultValue={inputAddress} required placeholder=\"Input Your address\" as=\"textarea\" \n        rows=\"1\"\n        onChange={onAddressChange} \n        onFocus={()=>{ setFocused(true)}}\n        onBlur={onAddressBlur}\n        />\n      {(focused) && (<Form.Text className=\"p-3 mt-1 alert-secondary\">\n        <Row>\n          <Col sx={6} className=\"p-0 pl-2\">\n            Street Address: <b>{validAddress.street_address1}</b><br/>\n            City: <b>{validAddress.city}</b><br/>\n            {(isValid) ? (<span className=\"text-success\">Correct Format.</span>) : (<span  className=\"text-info\">Parsing ...</span>)}\n          </Col>\n          <Col sx={6}  className=\"p-0 pl-2\">\n            State: <b>{validAddress.state}</b><br/>\n            Postal: <b>{validAddress.postal_code}</b><br/>\n            Country: <b>{validAddress.country}</b><br/>\n          </Col>\n        </Row>  \n      </Form.Text>)}\n    </Form.Group>);\n}\n\nexport { AddressInput }","import React from 'react';\nimport { Navbar, Container } from 'react-bootstrap';\nimport { Logo } from '../common';\nfunction InfoHeader(props) {\n  return (\n    <Container className=\"bg-primary\" fluid={true}>\n      <Container>\n        <Navbar expand=\"lg\" className=\"p-1\">\n            <Navbar.Brand href=\"/\" ><Logo/></Navbar.Brand>\n            <Navbar.Brand className=\"menu-color\">\n              {props.comp}\n            </Navbar.Brand>\n        </Navbar>\n      </Container>\n    </Container>\n  )\n}\nexport { InfoHeader };\n","import React from 'react';\nfunction Logo() {\n  return (\n    <div className=\"border rounded p-1 m-0\" style={{color:'yellow', fontSize:'1.5rem'}}>\n    菜譜<span className=\"ml-1\" style={{fontSize:'1rem'}}>Dishfu</span>\n    </div>\n  )\n}\nexport { Logo };\n","import React , {useState, useEffect} from 'react';\nimport { IPFSEngine, Cache } from '../common';\nimport { Image } from 'react-bootstrap';\n\nfunction IPFSImg(props) {\n  const ipfsEngine = new IPFSEngine();\n\n  const ipfsCache = !props.isCache ?  new Cache('') : new Cache((document._cacheExist) ? 'window' : 'localStorage');\n  \n  const [base64, setBase64] = useState('');\n\n  useEffect(()=> {\n    if (props.base64) {\n      setBase64(props.base64);\n    } else if (props.ipfs) {\n      if (ipfsCache.getCache(props.ipfs)) {\n        setBase64(ipfsCache.getCache(props.ipfs));\n      } else {\n        ipfsEngine.getIpfsAsync(props.ipfs, (data)=> {\n          if (data) {\n            setBase64(data);\n            ipfsCache.setCache(props.ipfs, data);\n          }\n        })  \n      }\n    }\n  }, []);\n  return (<Image src={!!base64 ? base64 : '/imgs/ipfs-processing.png'} alt=\"uploaded File\" \n      className={props.className} style={props.style} />)\n}\nexport { IPFSImg };\n\n","\nimport React, {useEffect, useState} from 'react';\n\nimport { Badge } from 'react-bootstrap';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faShoppingCart } from '@fortawesome/free-solid-svg-icons'\nimport { DataStore } from '../../stores';\nimport { Engine } from '../common';\n\nfunction ShoppingCnt(props) {\n  const engine = new Engine();\n  const [cnt, setCnt] = useState(0);\n  \n  const getOrderCount = (orders)=> {\n    let cnt = 0;\n    for (let v in orders) {\n      cnt += (!orders[v] || !orders[v].count) ? 0 : orders[v].count;\n    }\n    setCnt(cnt);\n    return cnt;\n  }\n  useEffect(() => {\n    const shppingHandle = DataStore.subscribe(()=> {\n      if (DataStore.getState().LastAction === 'shopping') {\n        getOrderCount(DataStore.getState().data.orders);\n      }\n    });\n    engine.loadStorageData({}, ()=>{\n      getOrderCount(DataStore.getState().data.orders);\n    });\n    return ()=> {\n      shppingHandle();\n    }\n  }, []);\n\n  return (<span className={(props.className) ? props.className : 'text-light bg-primary'}>\n  <FontAwesomeIcon size=\"1x\" icon={faShoppingCart}/><Badge className=\"ml-1 alert-primary\" \n  style={{position:'relative', fontSize:'0.6rem', top:'-0.4rem'}}>{cnt}</Badge></span>);\n}\n\nexport default ShoppingCnt;\n","\nimport React, {useEffect, useState} from 'react';\nimport { Button } from 'react-bootstrap';\nimport { DataStore } from '../../stores';\n\nconst  AddOrder = (props) => {\n  const AddToOrders = ()=> {\n    DataStore.dispatch({\n      type: 'addShoppingCartItem',\n      data : { code : props.code, count: (!props.count) ? 1 :  props.count}\n    })\n  }\n  return  (\n    <Button onClick={ AddToOrders}>\n        Order\n    </Button>);\n}\n\nexport { AddOrder };\n","/*\nimport React, {useEffect, useState} from 'react';\nimport { DataStore } from '../../stores';\nimport { OrderDetails } from '../Orders'\n\nfunction MyOrdersList(props) {\n  const [list, setList] = useState([]);\n  const [tm, setTm] = useState(0);\n  useEffect(() => {\n    setList(DataStore.getState().data.orders);\n    setTm(new Date().getTime());\n  }, []);\n\n  return (<span>\n    {list.map((v, k)=> {\n      return (<span key={k}>{v.code}\n      -{tm}-\n        <OrderDetails record={v} tm={tm}/>\n      <br/></span>);\n    })}\n  </span>)\n}\n\nexport default MyOrdersList;\n*/\nimport { DataStore } from '../../stores';\nclass MyOrdersList {\n    constructor(prop) {\n    }\n    getList() {\n      return DataStore.getState().data.orders;\n    }\n}\nexport default MyOrdersList;;","\nimport React, {useEffect, useState} from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlus, faMinus, faTrashAlt, faShoppingCart } from '@fortawesome/free-solid-svg-icons'\nimport { Badge, Button } from 'react-bootstrap';\nimport { DataStore } from '../../stores';\nimport { Engine } from '../common';\n\nfunction ShoppingCartOprator(props) {\n  const engine = new Engine();\n  const [item, setItem] = useState(props.code);\n  const [cnt, setCnt] = useState(0);\n\n  const getOrderCount = ()=> {\n    const idx = DataStore.getState().data.orders.findIndex((v)=> v && v.code === item);\n    const order = (idx !== -1) ? DataStore.getState().data.orders[idx] : null;\n    setCnt(!order? 0 : order.count);\n  }\n\n  const isOrdersCount = ()=> {\n    return (DataStore.getState().data.orders.length) ? true : false;\n  }\n\n  const add = ()=> {\n    DataStore.dispatch({\n      type: 'updateShoppingCartItem',\n      data : { code : props.code, count: (cnt + 1)}\n    })\n  }\n  const minus = ()=> {\n    DataStore.dispatch({\n      type: 'updateShoppingCartItem',\n      data : { code : props.code, count: (cnt > 0) ? (cnt - 1) : 0}\n    })\n  }\n  const remove = ()=> {\n    DataStore.dispatch({\n      type: 'removeShoppingCartItem',\n      data : { code : props.code}\n    })\n  }\n  const cleanShoppingCart = ()=> {\n    DataStore.dispatch({\n      type: 'initShoppingCart'\n    })   \n  }\n\n  useEffect(() => {\n    setItem(props.code);\n    const shppingHandle = DataStore.subscribe(()=> {\n      if (DataStore.getState().LastAction === 'shopping') {\n        getOrderCount();\n      }\n    });\n    engine.loadStorageData({}, ()=>{\n      getOrderCount();\n    });\n    return ()=> {\n      shppingHandle();\n    }\n  }, []);\n\n  return (<span className={(props.className) ? props.className : 'text-light bg-primary'}>\n  {(props.operater === 'minus') && (<FontAwesomeIcon size=\"1x\" icon={faMinus} onClick={minus} />)}\n  {(props.operater === 'plus') && (<FontAwesomeIcon size=\"1x\" icon={faPlus} onClick={add} />)}\n  {(props.operater === 'remove') && (<FontAwesomeIcon size=\"1x\" icon={faTrashAlt} onClick={remove} />)}\n  {(props.operater === 'initShoppingCart' && isOrdersCount()) && \n      (<Button variant =\"link\" onClick={cleanShoppingCart} >\n        <FontAwesomeIcon size=\"1x\" icon={faShoppingCart} className=\"mr-2\" />{(!props.caption) ? '' : props.caption}\n      </Button>)}\n\n  {(props.operater === 'showCount') && \n      (<Badge className=\"text-primary alert-primary p-2\">\n        {cnt}\n      </Badge>)\n  }\n  {(props.operater === 'showTotal') && \n       (<div className=\"p-2 text-center text-dark\">${cnt * props.price}</div>)\n  }\n  </span>);\n}\n\nexport default  ShoppingCartOprator;\n","import {useEffect, useState} from 'react';\nimport { DataStore } from '../../stores';\n\nfunction ShoppingCartWatcher (props) {\n\n  useEffect(() => {\n    const shppingHandle = DataStore.subscribe(()=> {\n      if (DataStore.getState().LastAction === 'shopping') {\n        if (props.changed)  {\n          props.changed();\n        }\n      }\n    });\n    return ()=> {\n      shppingHandle();\n    }\n  }, []);\n\n  return '';\n}\n\nexport default ShoppingCartWatcher;\n","import React , { useState, useEffect } from 'react';\nimport { Container, Form, Button, Alert } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faQrcode, faUnlockAlt } from '@fortawesome/free-solid-svg-icons';\n\nimport { SettingStore } from '../../stores';\n\nfunction AuthHeadItem(props) {\n    const [isAuth, setIsAuth ] = useState(false);\n    useEffect(() => {\n        const handleSubscribe = SettingStore.subscribe(() => {\n          if (SettingStore.getState()._watcher === 'auth') {\n            setIsAuth(SettingStore.getState().data.auth);\n          }\n          return false;\n        });\n        setIsAuth(SettingStore.getState().data.auth);\n        return ()=> {\n          handleSubscribe();\n      }\n      }, []);\n\n    return (<div className=\"rounded p-1 m-0\" style={{fontSize:'1.1rem'}}>\n        <span className={(!isAuth) ? '  menu-color ' : ' text-light  '}>\n        <FontAwesomeIcon size=\"1x\" icon={(!isAuth) ? faQrcode : faUnlockAlt} className=\"mr-1\" /> Auth\n        </span>\n    </div>)\n}\n\nexport { AuthHeadItem }","import React , { useState, useEffect } from 'react';\nimport { Container, Image, Alert, Button } from 'react-bootstrap';\nimport QRCode from 'qrcode'\nimport socketClient  from 'socket.io-client';\nimport { SettingStore } from '../../stores';\n\nfunction AuthBody(props) {\n    const [qr, setQr] =  useState('');\n    const [sockedId, setSockedId] =  useState('');\n    const SOCKET_URL = SettingStore.getState().config.sockerServer;\n\n    const [isAuth, setIsAuth] = useState(null);\n    const [authInfo, setAuthInfo] = useState({});\n\n    const saveAuthInfo = (data)=> {\n        const rec = {...data}\n        rec.auth = true;\n        rec.signInTime = new Date().getTime();\n       SettingStore.dispatch({\n           type: 'saveAuthInfo',\n           data: rec\n       });\n    }\n    const signOutAuth = ()=> {\n        const rec = {auth : false}\n        SettingStore.dispatch({\n           type: 'saveAuthInfo',\n           data: rec\n       });\n    }\n    const getAuthInfo = (data)=> {\n        setAuthInfo(SettingStore.getState().data.authInfo);\n        setIsAuth(SettingStore.getState().data.auth);\n    }\n\n    useEffect(()=> {\n        getAuthInfo();\n        const handleSubscribe = SettingStore.subscribe(() => {\n            if (SettingStore.getState()._watcher === 'auth' || SettingStore.getState()._watcher === 'role') {\n                getAuthInfo();\n            }\n            return false;\n        }); \n        return ()=> {\n            handleSubscribe();\n        }\n    }, [])\n    useEffect(()=> {\n        if (isAuth === false) {\n            const socket = socketClient.connect(SOCKET_URL);\n            socket.on('connect', () => {\n                socket.on('afterTransfer', (fromSocket, body) =>{\n                    // console.log('afterTransfer, from->',fromSocket);\n                    // console.log('afterTransfer,  body->', body);\n                    saveAuthInfo(body);\n                    socket.disconnect();\n                });\n                setSockedId(socket.id.replace('/dishFu#', ''));\n            });\n            socket.on('disconnect', () => {\n                \n            });\n            return ()=> {\n                socket.disconnect();\n            }\n        }\n\n    }, [isAuth]);\n\n    useEffect(()=> {\n        if (sockedId) {\n            QRCode.toDataURL(SettingStore.getState().config.webServer  + '/MobileAuth/' + sockedId,\n            { \n                width:338,\n                type: 'image/png',\n                quality: 1.0,\n                color: {\n                    dark: '#000000',  \n                    light: '#0000'\n                }\n            }, (err, str)=>{\n                setQr(str)\n            });\n        }\n    }, [sockedId]);\n\n\n    const authPage =  (<Container className=\"content-body mt-3\">\n            <h4>Scan it with an authrized phone.</h4><br/>\n            {SettingStore.getState().config.webServer + '/MobileAuth/' + sockedId}\n            <br/>\n            <Image src={qr} className=\"border border-primary\"/>\n        </Container>)\n\n    const infoPage =  (<Container className=\"content-body mt-3\">\n        <Alert variant=\"secondary mt-3\">\n            <Alert.Heading>Current Authentication</Alert.Heading>\n                {(authInfo) && (<p className=\"pb-3 pt-3 m-3\">\n                    Address: <b>{ authInfo.address}</b><br/>\n                    Roles: <b>{ ( !authInfo.roles) ? '' : authInfo.roles.join(',')}</b><br/>\n                    Sign in time: <b>{ new Date(authInfo.signInTime).toLocaleDateString()} </b><br/>\n                </p>)}\n                <Button onClick={signOutAuth} className=\"m-3\">\n                    Sign out this equipment\n                </Button>\n            </Alert>\n        </Container>)\n    return !(isAuth) ? authPage : infoPage;\n}\n\nexport {  AuthBody }","import React , { useEffect, useState } from 'react';\nimport {useParams } from \"react-router-dom\";\nimport { Container, Alert, Button } from 'react-bootstrap';\nimport socketClient  from \"socket.io-client\";\nimport { SettingStore } from '../../stores';\nimport { InfoHeader } from '../common';\n\nfunction MobileAuth(props) {\n  const {SocketID } = useParams();\n  const SOCKET_URL = SettingStore.getState().config.sockerServer;\n  const [success, setSuccess ] = useState(false);\n  const [isContinue, setIsContinue ] = useState(true);\n  const [isAuth, setIsAuth] = useState(SettingStore.getState().data.auth);\n\n  const permit = ()=> {\n\n    const socket = socketClient.connect(SOCKET_URL);\n    socket.on('connect', function(){\n        socket.emit(\"transfer\",SocketID, socket.id, \n        SettingStore.getState().data.authInfo);\n        socket.disconnect();\n        setSuccess(true);\n    });\n  }\n  useEffect(() => {}, []);\n\n\nconst infoSection = (data) => (!!data) && (<div>\n  Auth Code: <b>{data.authCode}</b><br/>\n  Address: <b>{data.address}</b><br/>\n  Roles: <b>{(!data.roles) ? '' : data.roles.join(',')}</b><br/>\n</div>)\n\n  const Frame = (info) => (<Container fluid={true} className=\"m-0 p-0\">\n  <InfoHeader comp={'Auth with Mobile'}/>\n  <Container>\n    <Alert variant={!info.variant ? 'light mt-3' :  info.variant}>\n    <Alert.Heading>{info.title}</Alert.Heading>\n      {info.body}\n    </Alert>\n  </Container>\n  </Container>)\n\nconst warningPage = (<Frame title=\"Warning\" \n  body={(<Container fluid={true}>\n    <p className=\"text-danger\">\n      The authentication on this mobile will send to the target equipment. Please confirm!\n    </p>\n    <p className=\"alert-secondary p-2\">\n      {infoSection(SettingStore.getState().data.authInfo)}\n    </p>\n    <Button onClick={permit} className=\"m-2\">\n        Continue Anyway\n    </Button>\n    <Button onClick={ ()=> { setIsContinue(false)} } variant=\"danger\" className=\"m-2\">\n        Stop\n    </Button> \n  </Container>\n  )} />);\n  \n  const unAuthentication = (<Frame title=\"Warning!\" body=\"The mobile has not been authenticated!\" variant=\"danger m-3 p-3\" />);  \n  const successPage = (<Frame title=\"succeed!\" body=\"The mobile authentication completed!!\" />);  \n  const stopContinuePage = (<Frame title=\"Stop!\" body=\"No worry. The mobile authentication is not going through!\" />);\n  \n  return (!isAuth) ? unAuthentication : (!isContinue) ? stopContinuePage : (success) ? successPage : warningPage;\n}\nexport { MobileAuth};","import React , { useEffect } from 'react';\nimport {useParams } from \"react-router-dom\";\nimport { Container } from 'react-bootstrap';\nimport socketClient  from \"socket.io-client\";\n\n\n\nfunction InfoCatch(props) {\n  const { InfoCode } = useParams();\n  const SOCKET_URL = '/dishFu';\n\n  useEffect(() => {\n    const socket = socketClient.connect(SOCKET_URL);\n    /*\n    socket.on('connect', function(){\n        socket.emit(\"transfer\",InfoCode , socket.id, 'BODY BODY');\n        history.push('/');\n    });*/\n    return ()=> {\n        socket.disconnect();\n    }\n  }, []);\n\n  return (\n    <Container fluid={true} className=\"m-0 p-0\">\n        <h1>Mobile InfoCatch--AAA-</h1>\n        {InfoCode}\n    </Container>\n  );\n}\nexport { InfoCatch };\n","import React , { useEffect, useState } from 'react';\nimport {useParams } from \"react-router-dom\";\nimport { Container, Alert, Button } from 'react-bootstrap';\nimport { InfoHeader, Engine, } from '../common';\nimport { SettingStore } from '../../stores';\n// import { Engine, IPFSEngine, IpfsDoc, DisplayRecipe  } from '../../common';\n\nfunction ScanSignin (props) {\n  const { RequestID } = useParams();\n  const [ inComeInfo, setIncomeInfo ] = useState({});\n  const [ isContinue, setIsContinue ] = useState(true);\n  const [ success, setSuccess ] = useState(false);\n  const [ isAuth, setIsAuth ] = useState(false);\n  const [ cAuth, setCAuth ] = useState(SettingStore.getState().data.authInfo);\n  const [ error, setError ] = useState(false);\n  \n  const engine = new Engine();\n\n  const loadData = ()=> {\n    const url = SettingStore.getState().config.apiServer + '/api/application/getAuthUserByAuthCode';\n    engine.loadingOn();\n\n    engine.DatabaseApi('auth', {\n      action: 'getAuthUserByAuthCode',\n      RequestID : RequestID \n    }, (result)=>{\n      engine.loadingOff();\n      setIncomeInfo(result.data);\n    });\n  }\n  useEffect(() => {\n    setIsAuth(SettingStore.getState().data.auth);\n    loadData ();\n    const handleSubscribe = SettingStore.subscribe(() => {\n        if (SettingStore.getState()._watcher === 'auth') {\n          // alert(SettingStore.getState()._watcher);\n          // SettingStore.getState().auto == true;\n          console.log('SettingStore.getState()=AA=>', SettingStore.getState().data);\n            setSuccess(true);\n          // setloadReady(true);\n          //  getAuthInfo();\n        }\n        return false;\n    }); \n\n    return ()=> {\n        handleSubscribe();\n    }\n\n  }, []);\n  const saveAuthInfo = (data)=> {\n    const rec = {...data};\n    rec.signInTime = new Date().getTime();\n    rec.auth = true;\n\n    SettingStore.dispatch({\n        type: 'saveAuthInfo',\n        data: rec\n    });\n  }\n  const approveSignin = ()=> {\n    saveAuthInfo(inComeInfo);\n  }\n\n  const AuthSection = (data) => (!!data) && (<div>\n    Auth Code: <b>{data.authCode}</b><br/>\n    Address: <b>{data.address}</b><br/>\n    Roles: <b>{(!data.roles) ? '' : data.roles.join(',')}</b><br/>\n    Sign In Time: <b>{!data.signInTime ? '' : new Date(data.signInTime).toLocaleDateString()}</b><hr/>\n  </div>)\n\n\nconst ComingInfoSection = (data) => (!!data) && (<div>\n  Auth Code: <b>{data.authCode}</b><br/>\n  Address: <b>{data.address}</b><br/>\n  Roles: <b>{(!data.roles) ? '' : data.roles.join(',')}</b><br/>\n</div>)\n\n  const Frame = (info) => (<Container fluid={true} className=\"m-0 p-0\">\n      <InfoHeader comp={'Scan Signin'}/>\n      <Container>\n        <Alert variant=\"light mt-3\">\n        <Alert.Heading>{info.title}</Alert.Heading>\n          {info.body}\n        </Alert>\n      </Container>\n    </Container>)\n\n  const errorPage = (<Frame title=\"Error!\" body={error} />);\n  const stopContinuePage = (<Frame title=\"Stop!\" body=\"The scan signin is not going through!\" />);\n  const successPage = (<Frame title=\"succeed!\" body=\"The scan signin completed!!\" />);\n\n  const itIsAuthedPage = (<Frame title=\"Your equipment is authorized by\" \n      body={(<div className=\"d-grid gap-2\">\n          <b>Exist auth:</b>\n          {AuthSection(cAuth)}\n          <b>Switch to</b>\n          {ComingInfoSection (inComeInfo)}\n          <Button onClick={approveSignin } className=\"m-2\">\n              Continue Anyway\n          </Button>\n          <Button onClick={ ()=> { setIsContinue(false)} } variant=\"danger\" className=\"m-2\">\n              Stop\n          </Button>\n          </div>)}/>);\n\n  const infoPage = (<Frame title=\"Coming authentication is\" \n      body={(<div className=\"d-grid gap-2\">\n          <b>Equempent Setup to</b>\n          {ComingInfoSection(inComeInfo)}\n          <Button onClick={approveSignin } className=\"m-2\">\n              Continue Anyway\n          </Button>\n          <Button onClick={ ()=> { setIsContinue(false)} } variant=\"danger\" className=\"m-2\">\n              Stop\n          </Button>\n          </div>)}/>);\n\n \n\n  return  (error) ? errorPage:\n        (!isContinue) ? stopContinuePage : \n        (success) ? successPage : (isAuth)? itIsAuthedPage : infoPage\n      \n}\nexport { ScanSignin };\n","\nimport React, {useEffect, useState} from 'react';\nimport { Nav, /* NavDropdown, */ Navbar, Container, Badge } from 'react-bootstrap';\nimport { Link, useLocation  } from \"react-router-dom\";\nimport { RoleSection } from './common';\nimport { ShoppingCnt }  from './shoppingCart';\nimport { AuthHeadItem  }  from './mobileAuth';\nimport { Logo } from './common';\n\nfunction Header(props) {\nconst [expanded, setExpanded] = useState(\"\")\n\n  const navItem = {\n    design:  {caption: 'Workshop', role: ['foodie', 'supie'], linkTo: '/workshop'},\n    focus:  {caption: 'Community', role: ['foodie', 'supie'], linkTo: '/community'},\n    menus: {caption: 'Menu', role: ['all'], linkTo: '/menus'},\n    foodie: {caption: 'Become a foodie', role: ['all'], linkTo: '/becomeFoodie', exrole: ['foodie']},\n    supie: {caption: 'Become a supie', role: ['all'], linkTo: '/becomeSupie', exrole: ['supie']},\n    orders:  {caption: (<ShoppingCnt/>), role: ['all'], linkTo: '/orders'},\n  };\n  const SelectedClass = (v)=> {\n    const location = useLocation(); \n    return (location.pathname !== navItem[v].linkTo) ? 'menu-color' : 'menu-color-select';\n  }\n  const getNavLink = (v)=> {\n    const item = !navItem[v] ? {role: []} : navItem[v],\n          itemRole = (!item || !item.role) ? [] : item.role,\n          itemExRole = (!item || !item.exrole) ? [] : item.exrole;\n    const comp = ((item)=>(<Nav.Link as={Link} to={item.linkTo} className={SelectedClass(v)}\n        onClick={()=> {  setExpanded(false); }}>{item.caption}</Nav.Link>))(item);\n\n    return (<RoleSection roles={itemRole} comp={comp} exroles={itemExRole}  />);\n  }\n  useEffect(() => {\n  }, []);\n\n  return (\n    <Container className=\"bg-primary\" fluid={true}>\n      <Container>\n        <Navbar expand=\"lg\" className=\"p-1\" expanded={expanded}>\n            <Navbar.Brand as={Link} to=\"/\" className=\"menu_color\"><Logo/></Navbar.Brand>\n            <Navbar.Brand as={Link} to=\"/auth\" className=\"menu_color\">\n                <AuthHeadItem />\n            </Navbar.Brand>\n            <Navbar.Toggle aria-controls=\"basic-navbar-nav\" onClick={() => setExpanded(expanded ? false : \"expanded\")} />\n            <Navbar.Collapse id=\"basic-navbar-nav\">\n            <Nav className=\"me-auto\">\n                \n                {getNavLink('menus')}\n                {getNavLink('foodie')}\n                {getNavLink('supie')}\n                {getNavLink('design')}\n                {getNavLink('focus')}\n                {getNavLink('orders')}\n                \n            </Nav>\n            </Navbar.Collapse>\n\n        </Navbar>\n      </Container>\n    </Container>\n  );\n}\n\nexport default Header;\n","import { Container } from 'react-bootstrap';\nimport React from 'react';\nimport { Link } from \"react-router-dom\";\n\nfunction Footer() {\n  const Year = new Date().getFullYear();\n  return (\n    <Container fluid={true} className=\"footer\">\n        <div className=\"float-left alert-secondary footer-tag\">\n          &copy; {Year} Dishfu &nbsp;\n          &nbsp;<Link to=\"/privacy\">Privacy</Link>\n          &nbsp;|&nbsp;<Link to=\"/terms\">Term</Link>\n          \n          &nbsp;|&nbsp;<Link to=\"/setting\">setting</Link>\n        </div>\n        <div className=\"clearfix p-0 m-0\"></div>\n    </Container>\n    \n  );\n}\nexport default Footer;\n","import React , { useState, useEffect } from 'react';\nimport { Container, Button, Badge  } from 'react-bootstrap';\n\nimport { DataStore } from '../../../stores';\n\nimport { Link } from \"react-router-dom\";\nimport { IPFSImg, Engine } from '../../common';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus, faTrashAlt, faEdit } from '@fortawesome/free-solid-svg-icons';\n\nfunction RecipeList(props) {\n  const engine = new Engine();\n  const [items, setItems] = useState([]);\n  const [cnt, setCnt] = useState(0);\n  // const [tm, setTm ] = useState(new Date().getTime());\n\n  const showPhotoList = (photos) => {\n    return (<span className=\"clearfix\">\n        {photos.map((o, k)=>{\n          return (<IPFSImg ipfs={o.ipfs} isCache={true} key={k} className=\"float-left m-1 bg-secondary iconsImage\"/>)   \n        })}\n    </span>)\n  }\n  const recordPhotos = (rec) => {\n    let photos = [], secs=['plates', 'cooking', 'ingredients'];\n    for (let i = 0; i < secs.length; i++) {\n      if (rec[secs[i]]) {\n        rec[secs[i]].map((v)=> {\n          photos = [...photos, ...v.photos];\n        })\n      }\n    }\n    return photos;\n  }\n\n  const deleteRecipe = (id)=> {\n    engine.loadingOn();\n    engine.saveLocalRecord({\n      type: 'deleteLocal',\n      section:'recipes',\n      data: {id: id}\n    }, (data)=>{\n      const list = DataStore.getState().data.recipes;\n      const cnt = list.length;\n      setItems(list);\n      setCnt(cnt);\n   //   setTm(new Date().getTime());\n      engine.loadingOff();\n    });\n  }\n  \n  const loadList = ()=> {\n    const list = DataStore.getState().data.recipes;\n    const cnt = list.length;\n    setItems(list);\n    setCnt(cnt);\n   // setTm(new Date().getTime());\n  } \n  \n\n  useEffect(()=> { \n    engine.loadStorageData({}, ()=>{\n      loadList();\n    });\n  }, [])\n\n  const showNothing = ()=> (\n    <Container fluid={true} className=\"rounded p-3 message-box grid-bg\">\n      <h3 className=\"text-secondary m-3 p-3\">There is not recipe avaliable.</h3>\n    </Container>\n  );\n  const showList= (cnt)=> {\n    return (<Container fluid={true}  className=\"p-0 m-0\">\n    {items.map((rec, key) => {\n        return !rec ? '' : (\n        <Container fluid={true} key={key} className=\"border shadow-sm p-0 mt-2 mb-3\">\n          <div className=\"float-right mr-2 p-2\">\n            <Button variant=\"link\" as={Link} to={'/editRecipe/'+ rec.id} className=\"p-0 ml-3\">\n              <FontAwesomeIcon size=\"1x\" icon={faEdit} /> Edit\n            </Button>\n            <Button variant=\"link\" onClick={()=>{ deleteRecipe(rec.id) }} className=\"p-0 ml-3\">\n              <FontAwesomeIcon size=\"1x\" icon={faTrashAlt} /> Delete\n            </Button>\n          </div>\n          <b className=\"float-left p-2 pl-3 pr-3 pb-0 m-0\">{rec.name}</b>\n          <div className=\"clearfix p-0 m-0\"></div>\n          <Container fluid={true}  className=\"p-0 pl-3 pr-3 pb-1\">\n            <div>\n              <p className=\"float-right\" style={{maxWidth:'200px'}}>\n                 {showPhotoList(recordPhotos(rec))}\n              </p>  \n              <span className=\"text-primary\">Ingredients:</span>\n              {rec.ingredients.map((v, k)=>{  return v.text })}\n              <br/>\n              <span className=\"text-primary\">Instruction:</span>\n              {rec.cooking.map((v, k)=>{ return v.text })}\n            </div>\n            <div className=\"clearfix p-1 m-0\"></div>\n          </Container>\n        </Container>);\n      })}</Container>);\n  }\n  return (\n    <Container fluid={true} className=\"content-body p-0 m-0\">\n        <h4 className=\"float-left\">Recipes</h4>\n        <Badge className=\"float-left ml-1 mr-3 alert-primary\">{cnt}</Badge>\n        <Link to=\"/editRecipe/new\"  className=\"float-left ml-3 mt-1\"><FontAwesomeIcon size=\"1x\" icon={faPlus} /> Add a new recipe</Link>\n      <div className=\"clearfix p-0 m-0\"></div>\n      {(cnt) ? showList(cnt) : showNothing()}\n    </Container>\n  );\n}\nexport default RecipeList;","\nimport React , { useState, useEffect, useRef} from 'react';\nimport { Container, Form, Button, InputGroup } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPaperclip, faTrashAlt, faTimesCircle } from '@fortawesome/free-solid-svg-icons'\nimport { IPFSImg } from '../../common';\n\nfunction RecipeSection(props) {\n  const [record, setRecord] = useState(props.record);\n  const inputFileHandle = useRef(null); \n  const uploadFile = (e) => {\n    inputFileHandle.current.click();\n  }\n\n  const handleFileChange = async (e) => {\n    const list = [];\n    for (let i = 0; i <  e.target.files.length; i++) {\n        list.push({base64:await convertBase64(e.target.files[i])});\n        e.target.value = null;\n    }\n    record.photos = [...record.photos, ...list];\n    setRecord(record);\n    syncRec();\n  }\n\n  const removeSection = () => {\n    props.callParent.removeSection(props.idx);\n  }\n\n  const removePhoto = async (key) => {\n    record.photos.splice(key,1);\n    setRecord(record);\n    syncRec();\n  }\n\n  const convertBase64 = (file) => {\n    return new Promise((resolve, reject) => {\n      const fileReader = new FileReader();\n      fileReader.readAsDataURL(file)\n      fileReader.onload = () => {\n        resolve(fileReader.result);\n      }\n      fileReader.onerror = (error) => {\n        reject(error);\n      }\n    })\n  }\n\n  const syncRec = ()=> {\n    props.callParent.syncRec(props.idx, record);\n  }\n\n  const handleTextChange = async (e) => {\n    const rec = record;\n    rec.text=e.target.value;\n    setRecord(rec);\n    syncRec();\n  }\n\n  useEffect(()=> {\n\n  }, []);\n  \n  return (\n    <Container fluid=\"true\" className=\"p-2\">\n      <InputGroup className=\"m-2\">\n        {(record.idx) ? (<InputGroup.Text className=\"bg-light\">{record.idx}</InputGroup.Text>) : ''}\n        <Form.Control as=\"textarea\" defaultValue={(!props.record) ? '' : props.record.text} \n                  rows=\"2\" onChange={handleTextChange}/>\n      </InputGroup>\n      <Form.Control type=\"file\" hidden ref={inputFileHandle} onChange={handleFileChange}/>\n      <div className=\"clearfix p-1\">\n          <div  className=\"float-right\">\n            {props.isdelete && (<Button variant=\"link\" className=\"ml-3\" onClick={removeSection}>\n              <FontAwesomeIcon size=\"1x\" icon={faTrashAlt} className=\"m-0\" /> Remove\n            </Button>)}\n\n            <Button variant=\"link\" className=\"ml-3\" onClick={uploadFile}>\n              <FontAwesomeIcon size=\"1x\" icon={faPaperclip} className=\"m-0\" /> Upload Photo\n            </Button>\n          </div>\n        {record.photos.map((fa, key)=>{\n            return (\n            <div  key={key}  className=\"m-1 rounded shadow sahdow-sm alert-secondary bg-light float-left\">\n              \n              <IPFSImg base64={fa.base64} ipfs={fa.ipfs} isCache={true} className=\"iconsImage\" />\n              <FontAwesomeIcon size=\"2x\" icon={faTimesCircle} \n                onClick={()=>removePhoto(key)}\n            className=\"m-1 align-bottom\" />\n            </div>\n            )\n          })}\n      </div>\n    </Container>\n  );\n}\nexport default RecipeSection;\n","import React , { useState, useEffect } from 'react';\nimport { Container, Form, Button,  Row, Col } from 'react-bootstrap';\nimport { RecipeSection } from './';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlus, faSave, faUndo, faUpload } from '@fortawesome/free-solid-svg-icons'\nimport { DataStore, SettingStore } from '../../../stores';\n\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { Engine, IPFSEngine, IpfsDoc, DisplayRecipe  } from '../../common';\n\n\nfunction RecipeEdit(props) {\n  const engine = new Engine();\n  const ipfsEngine = new IPFSEngine();\n  const [tm, setTm] = useState(new Date().getTime());\n\n  const [record, setRecord] = useState(null);\n\n  const {id, recipeCode} = useParams();\n  const history = useHistory();\n\n  useEffect(()=> {\n    const engine = new Engine();\n    engine.loadStorageData({}, ()=>{\n      const idx = DataStore.getState().data.recipes.findIndex((v)=> v.id === id);\n      setRecord((id === 'new') ? {\n        id : 'new',\n        name:'', userId: SettingStore.getState().userId, \n        referenceCode : recipeCode,\n        cooking: [{text:'', photos:[]}], \n        ingredients:[{idx:'', text:'', photos:[]}]}\n       : (idx === -1) ? false : DataStore.getState().data.recipes[idx]\n      );\n    });\n\n   }, []);\n\n  const exit = ()=> {\n    engine.setOperationRole('foodie');\n    history.push('/workshop');\n  } \n  const save = async ()=> {\n    engine.loadingOn();\n    await ipfsEngine.promiseSave(record);\n    engine.saveLocalRecord({\n      type: 'updateLocal',\n      section:'recipes',\n      data: record\n    }, ()=>{\n      engine.loadingOff();\n      engine.setOperationRole('foodie');\n      exit();\n    });\n  }\n\n\n  const publish = async ()=> {\n    engine.loadingOn();\n    await ipfsEngine.promiseSave(record);\n    ipfsEngine.promisePublish(record,(code)=> {\n      engine.DatabaseApi('community', {\n        action: 'publish',\n        data: {\n          publishCode:  code, \n          docType:      'recipe', \n          publisher:    SettingStore.getState().fp, \n          authCode:     SettingStore.getState().data.authInfo.authCode\n        }\n      }, ()=>{\n        engine.loadingOff();\n        exit();\n      } )\n    });\n  }  \n\n\n  const removeSection = (section) => {\n    return (idx) => {\n      if (record[section]) {\n        record[section].splice(idx,1)\n        setRecord(record);\n        resetIdx(section);\n        setTm(new Date().getTime())\n      }\n    }\n  }\n  const resetIdx = (section) => {\n    const set = 'ABCDE';\n    if (!record[section]) return true;\n    for (let i = 0; i < record[section].length; i++) {\n      record[section][i].idx = set[i];\n    }\n    setRecord(record);\n  }\n  const addSection = (section)=> {\n    return ()=> {\n      const rec = record;\n      if ((rec[section]) && rec[section].length < 3) {\n        rec[section].push({idx:'', text:'', photos:[]});\n        resetIdx(section)\n        setRecord(rec);\n        setTm(new Date().getTime())\n      }\n    }\n  }\n  const syncRec = (section)=> {\n    return (idx, data) => {\n      const rec = record;\n      if (rec[section]) {\n        rec[section][idx] = data;\n        setRecord(rec);\n        setTm(new Date().getTime())\n      }\n    }\n  }\n  const onNameChange = async (e)=>{\n    const rec = record;\n    rec.name = e.target.value;\n    console.log('rec.name=>', rec.name, rec);\n    setRecord(rec);\n    console.log('onNameChange=>', e.target.value)\n  }\n  const referenceRecipe = (code)=> {\n    return (!code) ? '': (<Form.Text className=\"border border-secondary  alert-warning p-2 m-0\"\n    style={{height:'8rem',overflowY:'scroll', overflowX:'hidden', inline:'block'}}>\n      <Form.Text><i>Original Recipe</i></Form.Text>\n      <IpfsDoc ipfs={code} tpl={(props)=>(<DisplayRecipe record={props.record} className=\"p-0 m-0\" />)}/>\n    </Form.Text>)\n  }\n  return (record === null) ? \n  (<Container className=\"p-3 content-body\">\n    Loading ...\n  </Container>)\n  : (!record.id) ? \n    (<Container className=\"p-3 content-body\">\n      <div className=\"alert alert-danger\">Wrong recipe id -{id}-</div>\n    </Container>)\n    : \n    (\n    <Container className=\"p-3 content-body\">\n      <div className=\"p-3 border border-secondary\">\n        <Form>\n          <div className=\"m-1 ml-2\">\n              <b>{(id === 'new') ? \"New Foodie's Recip\" : (`Foodie's Recip `+ record.id)}</b>\n              &nbsp;(By user {record.userId}) {record.recipeCode}\n          </div>\n          {referenceRecipe(record.referenceCode)}\n\n          <Form.Group controlId=\"formFileSm\" className=\"p-2 m-1\">\n            <Form.Control defaultValue={record.name} required placeholder=\"Input Your Recipe Name\" type=\"textarea\" onChange={onNameChange} />\n          </Form.Group>\n\n          <div className=\"m-1 ml-2 mb-3\">\n              <b>Ingredients</b>\n              {record.ingredients.length < 3 && (<Button variant=\"link\" className=\"ml-3\" onClick={addSection('ingredients')}>\n                <FontAwesomeIcon size=\"1x\" icon={faPlus}  /> Add a Ingredient\n              </Button>)}\n\n              {record.ingredients.map((v, key)=>(<span key={key} >\n              <RecipeSection caption={'Section'} key={key}  idx={key} callParent={{syncRec:syncRec('ingredients'), removeSection: removeSection('ingredients')}}\n              record = {v}\n              isdelete={(record.ingredients.length < 2) ? false : true}/></span>))}\n\n          </div>\n\n          <div className=\"m-1 ml-2 mt-2\">\n              <b>Cooking Instruction</b>\n              {record.cooking.map((v, key)=>(<span key={key}>\n                <RecipeSection caption={''} key={key}  idx={key} callParent={{syncRec:syncRec('cooking'), removeSection: removeSection('cooking')}} \n                record = {v}\n                isdelete={(record.cooking.length < 2) ? false : true}/></span>))}   \n          </div>\n\n          <Row>\n            <Col xs=\"12\" align=\"center\" className=\"m-1 ml-2\">\n              <Button  type=\"button\" className=\"btn btn-primary m-1 mr-3\" onClick={save}>\n                <FontAwesomeIcon size=\"1x\" icon={faSave} className=\"m-0\" /> Save\n              </Button>\n              {(record.id !== 'new') && (<Button  type=\"button\" className=\"btn btn-primary m-1 mr-3\" onClick={publish}>\n                <FontAwesomeIcon size=\"1x\" icon={faUpload} className=\"m-0\" /> Publish\n              </Button>)}\n\n              <Button className=\"btn btn-secondary m-1 mr-3\" onClick={exit}>\n                <FontAwesomeIcon size=\"1x\" icon={faUndo} className=\"m-0\" /> Exit\n              </Button> \n            </Col>\n          </Row>\n        </Form>\n      </div>\n    </Container>\n  );\n}\nexport default RecipeEdit;\n","import React , { useState, useEffect } from 'react';\nimport { SettingStore } from '../../stores';\nimport { Container, Button, Form, Row, Col } from 'react-bootstrap';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheck, faSave, faTimes } from '@fortawesome/free-solid-svg-icons';\n\nfunction Setting(props) {\n    const roles = [\n        {code:'foodie', description:'Foodie'},\n        {code:'supie', description:'Food supplier / Restaurent / Grocery'}\n    ];\n    const [myRole, setMyRole] = useState([]);\n    const [userInfo, setUserInfo] = useState({address:''});\n    const [tm, setTm] = useState(new Date().getTime());\n    if (tm) {}\n\n    const changeAddress = (e)=> {\n        setUserInfo({\n            address : e.target.value\n        });\n    }\n\n    const changeRole = (code)=> {\n\n        const idx = myRole.indexOf(code);\n        if (idx === -1) {\n            myRole.push(code);\n        } else {\n            myRole.splice(idx, 1);\n        }\n        setMyRole(myRole);\n        setTm(new Date().getTime());\n    }\n    \n\n\n    const save = ()=> {\n        SettingStore.dispatch({\n            type: 'saveUserInfo',\n            userInfo: userInfo\n        });\n        SettingStore.dispatch({\n            type: 'saveRoles',\n            roles: myRole\n        });\n    }\n\n\n    useEffect(()=> { \n        const handleSubscribe = SettingStore.subscribe(() => {\n            if (SettingStore.getState()._watcher === 'role') {\n                setMyRole(SettingStore.getState().data.roles);\n                setUserInfo(SettingStore.getState().data.userInfo);\n                setTm(new Date().getTime());\n            }\n            return false;\n        }); \n        \n        setMyRole(SettingStore.getState().data.roles);\n        setUserInfo(SettingStore.getState().data.userInfo);\n        setTm(new Date().getTime());\n        return ()=> {\n            handleSubscribe();\n        }\n    },[])\n    return (\n        <Container className=\"p-3\">\n            <h5>Setting</h5>\n            <Container className=\"m-2 mr-3 p-2 alert-secondary\">\n            <b className=\"p-0 mb-3\">My roles</b>\n            {roles.map((v, k)=> {\n                return (<div key={k} className=\"p-0 pl-3 pr-3 text-primary\" onClick={()=>{\n                    changeRole(v.code);\n                }}>\n                    {v.description}\n                    {(myRole.indexOf(v.code) !== -1) && \n                        (\n                            <Button variant=\"link\" className=\"p-0 pl-3\">\n                                <FontAwesomeIcon size=\"1x\" icon={faCheck} className=\"ml-2 text-danger\"/>\n                            </Button>\n                        )}\n                    {(myRole.indexOf(v.code) === -1) && \n                        (\n                            <Button variant=\"link\" className=\"p-0 pl-3\">\n                                <FontAwesomeIcon size=\"1x\" icon={faTimes} className=\"ml-2 text-secondary\"/>\n                            </Button>\n                        )}\n                </div>);\n            })}\n            </Container>\n            <Container className=\"m-2 mr-3 p-2 alert-secondary\">\n            <b>My address</b>\n                <Form>\n                    <Form.Group controlId=\"formFileSm\" className=\"p-0 pl-3\">\n                        <Form.Label><b>Country:</b></Form.Label>\n                        {['USA', 'CANADA'].map((v, k)=> {\n                            return (myRole.indexOf(v.code) !== -1) ?\n                            (\n                                <Button variant=\"link\" key={k} className=\"p-0 pl-3\">{v}\n                                    <FontAwesomeIcon size=\"1x\" icon={faCheck} className=\"ml-1 mr-2 text-danger\"/>\n                                </Button>\n                            ) :\n                            (\n                                <Button variant=\"link\" key={k} className=\"p-0 pl-3\">{v}\n                                    <FontAwesomeIcon size=\"1x\" icon={faTimes} className=\"ml-1 mr-2  text-secondary\"/>\n                                </Button>\n                            )\n                        })}\n                    </Form.Group>\n                    <Form.Group className=\"p-0 pl-3\">\n                        <Form.Label><b>Street:</b></Form.Label>\n                        <Form.Control placeholder=\"Address, City\" \n                            as=\"textarea\" rows=\"3\"\n                            value={userInfo.address}\n                            onChange={changeAddress}/>\n                    </Form.Group>\n                </Form>\n            </Container>\n            <Row>\n            <Col xs=\"12\" align=\"center\" className=\"m-1 ml-2\">    \n              <Button  type=\"button\" className=\"btn btn-primary m-1 mr-3\" onClick={save}>\n              <FontAwesomeIcon size=\"1x\" icon={faSave} className=\"m-0\" /> Save\n              </Button>\n            </Col>\n          </Row>\n        </Container>\n    );\n}\nexport default Setting;","\nimport React , { useState, useEffect } from 'react';\nimport { Container, Row, Col, Button, Image } from 'react-bootstrap';\nimport { StarRating,  IconsImage,  IPFSImg   } from '../common';\nimport {  AddOrder } from '../shoppingCart';\n\nfunction MenuItem(props) {\n  const [record, setRecord] = useState(false);\n  const getContents = (rec)=>{\n    const list = [];\n    ['cooking', 'ingredients', 'plates'].map((v)=> {\n        const r = (!rec.data || !rec.data[v]) ? [] : rec.data[v];\n        r.map((v2)=>  list.push(v2.text + '; '));\n        return true;\n    });\n    return list.join(' ');\n  }\n  const getImages = (rec)=>{\n    const list = [];\n    ['cooking', 'ingredients', 'plates'].map((v)=> {\n        const r = (!rec.data || !rec.data[v] || !rec.data[v]) ? [] : rec.data[v];\n        r.map((v1) => {\n          const photos = (!v1.photos) ? [] : v1.photos;\n          photos.map((v2)=> {\n            if (v2 && v2.ipfs) {\n              list.push(v2.ipfs);\n            } \n            return true;\n          });\n          return true;\n        })\n        return true;\n    });\n    return list;\n  }\n\n  useEffect(()=> {\n    setRecord(props.rec);\n  }, []);\n\n\n\n  return  (!record.data) ? '' : (\n    <Container className=\"p-1\"  fluid={true}>\n      <Row>\n        <Col xs={2} style={{textAlign: \"center\"}} className=\"p-0 \">\n          <div  className=\"border bg-light\">\n          <IPFSImg ipfs={getImages(record)[0]} isCache={true}\n          style={{ maxHeight:'120px', objectFit: 'cover'}}/>\n          </div>\n        </Col>\n        <Col xs={8}  className=\"p-3\">\n          <b>{!record.data ? '' : record.data.name}</b><br/>\n          <span>{getContents(record)}\n          </span>\n          <b>{record.published}</b>\n          \n        </Col>\n        <Col xs={2} style={{textAlign: \"center\"}} className=\"p-0\">\n          <p className=\"text-center p-0\" style={{fontSize:'11px'}}>{record.publisher}</p>\n              <StarRating value=\"5\" readOnly=\"true\"/>\n          <h4 className=\"p-2\">{(!record.data || !record.data.price) ? 'Call Foodie' : ('$' + record.data.price)}</h4>\n\n          <AddOrder code={record.publishCode}/>\n          <hr/>\n        </Col>\n        <br/>\n      </Row>\n    </Container>\n  );\n}\nexport default MenuItem;\n","import React , { useState, useEffect } from 'react';\nimport { Container } from 'react-bootstrap';\n\nimport { RestfulAPI } from '../setting';\nimport { Engine, IPFSEngine } from '../common';\n\nimport { MenuItem,  MenuSection } from '../tpl';\n\nfunction MenuItems(props) {\n  const engine = new Engine();\n  const ipfsEngine = new IPFSEngine();\n  const [items, setItems] = useState([]);\n  const [itemsMenu, setItemsMenu] = useState([]);\n  const [tm, setTm] = useState(0);\n\n  const loadData = ()=> {\n    engine.loadingOn();\n    engine.DatabaseApi('menu', {\n      action: 'getList'\n    }, (result)=>{\n      engine.loadingOff();\n      (async ()=> {\n        // setItems(await ipfsEngine.promisePullQ(result.data));\n        console.log('==result.data===>', result);\n        setItems(await ipfsEngine.promisePullQ((!result.data) ? []:result.data));\n        setTm(new Date().getTime());\n      })();\n      console.log('menu--list->', result);\n    });\n      /*\n      (async ()=> {\n        // setItems(await ipfsEngine.promisePullQ(result.data));\n        console.log('==result.data===>', result.data);\n        setItems(await ipfsEngine.promisePullQ(result.data));\n        setTm(new Date().getTime());\n      })();\n*/\n/*\n    engine.loadingOn();\n    engine.getApiData({code:'menu'}, (data)=>{\n      setItems(data);\n      processItems(data);\n      engine.loadingOff();\n    });\n    return true;\n*/\n  }\n  const processItems = async (data)=>{\n    const p = await ipfsEngine.promisePullQ(data);\n    setItems(p);\n  }\n  useEffect(()=> { \n    \n    engine.loadStorageData({}, ()=>{\n      engine.getStorageData({},\n        (data)=> {\n         //  processData(data.menus);\n        }\n      );\n      loadData();\n    });\n\n  }, [])\n  return (\n    <Container className=\"p-3 content-body\">\n      <div className=\"p-3\">\n      <h5>Menus This Week</h5>\n      {items.map((v, k) => {\n        return (<MenuItem key={k} rec={v}/>)\n        // return (<MenuSection key={k} rec={v} />);\n      })}\n      </div>\n    </Container>\n  );\n}\nexport default MenuItems;\n","import React , { useEffect } from 'react';\nimport { Container } from 'react-bootstrap';\n\nfunction About(props) {\n  useEffect(() => {\n  }, []);\n  return (\n    <Container className=\"content-body\">\n      <h5 className=\"p-3\">About Us</h5>\n    </Container>\n  );\n}\n\nexport default About;\n","import React , { useEffect } from 'react';\nimport { Container } from 'react-bootstrap';\n\nfunction Contact(props) {\n  useEffect(() => {\n  }, []);\n  return (\n    <Container className=\"content-body\">\n      <h5 className=\"p-3\">Contact Us</h5>\n    </Container>\n  );\n}\n\nexport default Contact;\n","import React , { useEffect, useState } from 'react';\nimport { Container } from 'react-bootstrap';\nimport { Engine, StarRating,  IPFSImg } from '../common';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEgg } from '@fortawesome/free-solid-svg-icons';\n\nfunction Home(props) {\n  const [items, setItems] = useState([]);\n  const engine = new Engine();\n\n  useEffect(() => {\n    engine.loadingOn();\n    engine.DatabaseApi('ad', {\n      action: 'homeList'\n    }, (result)=>{\n      engine.loadingOff();\n      setItems(!result || !result.data || !result.data.promotion ? [] : result.data.promotion);\n    });\n  }, []);\n  return (\n    <Container fluid={true} className=\"p-0 m-0 content-body\">\n      <div className=\"master-bg-video-frame bg-secondary\">\n        <video className=\"master-bg-video\"\n          poster=\"https://media.blueapron.com/home_page/Splash/website_header_201911.png?quality=80\" \n          preload=\"auto\" autoPlay loop muted>\n            <source src=\"https://media.blueapron.com/home_page/Splash/BA_Holiday_201911.mp4\" type=\"video/mp4\"/>\n          </video>\n      </div>\n\n        <div style={{'minHeight':\"100%\"}}>\n        <div className=\"text-center\" style={{position: 'relative', height:'360px', top:'68px'}}>\n          <p><b className=\"p-1 text-light\" style={{fontSize: '3.8em', lineHeight:'2.8rem'}}>Community Workshops</b></p>\n          <p><b className=\"p-3 text-success\" style={{fontSize: '2.6em', lineHeight:'2.5rem'}}>Foodies together</b></p>\n          <p className=\"text-warning p-3\" style={{fontSize: '1.5em', lineHeight:'2rem'}}><b>\n            Cooking<FontAwesomeIcon size=\"1x\" icon={faEgg} className=\"m-1\" style={{fontSize:'0.5rem'}}/>\n            Eating<FontAwesomeIcon size=\"1x\" icon={faEgg} className=\"m-1\" style={{fontSize:'0.5rem'}}/>\n            Sharing<FontAwesomeIcon size=\"1x\" icon={faEgg} className=\"m-1\" style={{fontSize:'0.5rem'}}/>\n            Saving<FontAwesomeIcon size=\"1x\" icon={faEgg} className=\"m-1\" style={{fontSize:'0.5rem'}}/>\n            Enjoying!</b></p>\n        </div>\n        <Container fluid={true} className=\"alert-light\" \n            style={{position: 'relative',\n            marginBottom: '0px',\n            minHeight:'1024px',\n            textAlign: 'center'}}>\n          \n          <Container className=\"text-left pt-3\"><h3>Weekly Promotion:</h3></Container>\n          <Container className=\"text-left p-0\">\n            {items.map((record, k)=> {\n                return (<div key={k} className=\"float-left p-2 m-0 text-center\">\n                    <IPFSImg ipfs={record.ipfs} isCache={true} \n                    className=\"\"\n                    style={{width:'200px', height:'200px', minHeight:'180px', objectFit: 'cover'}}\n                    />\n                    <div>{record.name}\n                      <br/>\n                      <StarRating value={record.rating} readOnly=\"true\"/>\n                    </div>\n\n                </div>)})}\n              <div className=\"clearfix p-0 m-0\"></div>\n            </Container>\n        </Container>\n      </div>\n    </Container>\n  );\n}\nexport default Home;\n","import React from 'react';\nimport { Messagebox } from '../common';\nimport { useParams } from \"react-router-dom\";\n\nfunction ComingSoon(props) {\n  const param = useParams();\n  return (\n    <div className=\"m-0 p-0\">\n        <Messagebox message=\"Coming soon...\" title={param.title} />\n    </div>\n   \n  );\n}\n\nexport default ComingSoon;\n","import React , { useState, useEffect } from 'react';\nimport { Container, Badge } from 'react-bootstrap';\nimport { Engine, IPFSEngine  } from '../common';\nimport { DataStore } from '../../stores';\nimport  { CommunitySection }  from '.';\n\nfunction CommunityList(props) {\n  const engine = new Engine();\n  const ipfsEngine = new IPFSEngine();\n  const [items, setItems] = useState([]);\n  const [itm, setTm] = useState(new Date().getTime());\n\n  const loadList = ()=> {\n    console.log('.load list .' +  new Date().getTime())\n    engine.loadingOn();\n\n    engine.DatabaseApi('community', {\n      action: 'getList'\n    }, (result)=>{\n      engine.loadingOff();\n      console.log(result.data);\n      (async ()=> {\n        // setItems(await ipfsEngine.promisePullQ(result.data));\n        setItems(await ipfsEngine.promisePullQ(!result.data ? [] : result.data));\n        setTm(new Date().getTime());\n      })();\n     // setItems(await ipfsEngine.promisePullQ(result.data));\n    });\n  }\n\n  useEffect(()=> { \n    loadList();\n  },[]);\n\n  const deleteRecord = (publishCode)=> {\n    engine.loadingOn();\n    engine.DatabaseApi('community', {\n      action : 'delete',\n      data : {publishCode: publishCode}\n    }, (result)=>{\n      engine.loadingOff();\n      loadList();\n    });\n  }\n  \n  const  publishPlate = (rec) => {\n    engine.loadingOn();\n    engine.DatabaseApi('menu', {\n        action :'add',\n        data : {type: 'plate', publishCode: rec.publishCode}\n      }, (result)=>{\n        console.log(result)\n        loadList();\n        engine.loadingOff();\n      });\n  }\n\n  return (\n    <Container className=\"p-3 content-body\">\n       <h5>My community: <Badge bg=\"primary\" className=\"alert-primary ml-2\">{items.length}</Badge></h5>\n      <hr className=\"border border-danger\"/>\n      {items.map((v, k)=> {\n        return (<CommunitySection key={k} record={v} parent={{deleteRecord: deleteRecord, publishPlate:publishPlate}} />)\n      })}\n    </Container>\n  );\n}\nexport default CommunityList;","import React , { useState, useEffect } from 'react';\nimport { Container, Button } from 'react-bootstrap';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowCircleRight, faTrashAlt} from '@fortawesome/free-solid-svg-icons';\nimport { Link } from \"react-router-dom\";\nimport { IPFSImg } from '../common';\n\nfunction CommunitySection(props) {\n  const [record, setRecord] = useState(props.record);\n  \n  useEffect(()=> {\n    setRecord(props.record);\n  }, []);\n\n  const showPhotoList = (photos) => {\n    return (<span className=\"clearfix\">\n        {photos.map((o, k)=>(<IPFSImg ipfs={o.ipfs} isCache={true}  key={k}\n            className=\"m-1 float-left  bg-secondary iconsImage\"/>)\n        )}\n    </span>)\n  }\n  const recordPhotos = (rec) => {\n    let photos = [], secs=['plates', 'cooking', 'ingredients'];\n    for (let i = 0; i < secs.length; i++) {\n      if (rec[secs[i]]) {\n        rec[secs[i]].map((v)=> {\n          photos = [...photos, ...v.photos];\n        })\n      }\n    }\n    return photos;\n  }\n\n\n\n  return (\n    <Container fluid={true} className=\"border shadow-sm p-2 mt-2 mb-3\">\n      <p className=\"float-right\" style={{maxWidth:'200px'}}>\n          {showPhotoList(recordPhotos(record.data))}\n      </p>  \n      <div className=\"p-0\">\n          <p className=\"p-0 pl-0 m-1\">\n            <b>{record.data.name}</b>\n            <Link to={'/communityResponse/' + record.publishCode} className=\"ml-3\">Details\n              <FontAwesomeIcon size=\"1x\" icon={faArrowCircleRight} className=\"ml-2\"/>\n            </Link>\n            <Button variant=\"link\" onClick={()=>{ props.parent.deleteRecord(record.publishCode, 'community') }} className=\"p-0 ml-3\">\n              <FontAwesomeIcon size=\"1x\" icon={faTrashAlt} /> Delete\n            </Button>\n            <br/>\n            <span><i style={{fontSize:'0.8rem'}}>Record id-: {record.id}, Publisher {record.publisher}</i></span>\n          </p>\n          {record.data.ingredients &&  (<p className=\"text-secondary p-1 pl-2 m-0\">\n            <i className=\"text-primary\">Ingredients:</i> \n            {record.data.ingredients.map((v, k)=>{  return v.text })}\n          </p>)}\n          {record.data.plates &&  (<p className=\"text-secondary p-1 pl-2 m-0\">\n            <i className=\"text-primary\">Plates:</i> \n            {record.data.plates.map((v, k)=>{  return v.text })}\n          </p>)}\n          {record.data.cooking &&  (<p className=\"text-secondary p-1 pl-2 m-0\">\n            <i className=\"text-primary\">Instruction:</i> \n            {record.data.cooking.map((v, k)=>{  return v.text })}\n          </p>)}\n          <p className=\"text-secondary p-1 pl-2 m-0\">\n            <i className=\"text-primary mr-2\">Published:</i> \n            {new Date(record.created).toISOString().slice(0, 19)}\n            {/*new Date(record.published).toISOString().slice(0, 19)*/}\n            <br/>\n            <i className=\"text-primary\">Id:</i> {record.id}\n            <br/>\n            <i className=\"text-primary\">Price:</i> {record.data.price}  \n            <br/>\n            <i className=\"text-primary\">Document type:</i> {record.docType}  \n          </p>\n          {(record.docType === 'plate') &&  \n          (<Button onClick={()=>{ props.parent.publishPlate(record) }} className=\"btn-promary m-1\">\n             Foodie approve\n          </Button>)}\n\n          {(record.docType === 'recipe') && \n            (<Button as={Link} to={'/editPlate/' + record.publishCode + '/new'} className=\"btn-warning m-1\">\n              Add my plate\n            </Button>)}\n\n          {(record.docType === 'recipe' && !record.data.referenceCode) &&\n            (<Button as={Link} to={'/editRecipe/' + record.publishCode + '/new'} className=\"btn-success m-1\">\n              Reference to a new recipe\n            </Button>)}\n      </div>\n      <div className=\"clearfix p-0 m-0\"></div>\n    </Container>\n  );\n}\nexport default CommunitySection;\n","import React , { useState, useEffect } from 'react';\nimport { Container } from 'react-bootstrap';\nimport { Engine } from '../common';\nimport { DataStore } from '../../stores';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowCircleRight} from '@fortawesome/free-solid-svg-icons';\nimport { useParams, Link } from \"react-router-dom\";\nimport { IPFSEngine, IPFSImg } from '../common';\n\nfunction CommunityResponse(props) {\n  const engine = new Engine();\n  const ipfsEngine = new IPFSEngine();\n\n  const [record, setRecord] = useState(null);\n  // const [tm, setTm] = useState(0);\n  const { publishCode } = useParams();\n\n  const promiseIpfsQuery = (Q)=> {\n    console.log('Q==>', Q)\n    \n    return new Promise((resolve, reject) => {\n      fetch('http://209.94.90.1/ipfs/' + Q.recipe).then(v=>v.json()).then((data)=> {\n        const new_data = {\n          id : Q.id,\n          recipe : data,\n          ipfsCode: Q.recipe,\n          published: Q.published,\n          publisher: Q.publisher\n        } \n        resolve(new_data);\n      }).catch(err => { \n        reject('reject_' +  Q.recipe + '-'  + err.message);\n      });\n   })}\n\n  const showPhotoList = (photos, g) => {\n    return  photos.map((o, k)=> (<IPFSImg ipfs={o.ipfs} isCache={true}  key={k}  \n      className=\"m-1 bg-secondary iconsImage\"/>))\n  }\n  const recordPhotos = (rec, group) => {\n    let photos = [];\n    if (rec[group]) {\n      rec[group].map((v)=> {\n        photos = [...photos, ...v.photos];\n        return true;\n      })\n    }\n    return photos;\n  }\n/*\n  const showPhotoList = (photos) => {\n    return (<span className=\"clearfix\">\n        {photos.map((o, k)=>(<IPFSImg ipfs={o.ipfs} isCache={true}  key={k}\n            className=\"m-1 float-left  bg-secondary iconsImage\"/>)\n        )}\n    </span>)\n  }\n  const recordPhotos = (rec) => {\n    let photos = [], secs=['plates', 'cooking', 'ingredients'];\n    for (let i = 0; i < secs.length; i++) {\n      if (rec[secs[i]]) {\n        rec[secs[i]].map((v)=> {\n          photos = [...photos, ...v.photos];\n        })\n      }\n    }\n    return photos;\n  }\n*/\n\n  useEffect(()=> { \n    console.log(publishCode);\n    ipfsEngine.getIpfJsonsAsync(publishCode, (data)=> {\n\n      setRecord(data);\n      console.log('IPFSEngine.getIpfJsonsAsync==>',data);\n    })\n\n\n    engine.loadStorageData({}, ()=>{\n      const list = DataStore.getState().data.focuses.filter(v=>v.id === publishCode);\n      if (list[0]) {\n        promiseIpfsQuery(list[0]).then((v)=>{\n         // setRecord(v);\n         // setTm(new Date().getTime());\n        })\n      }\n\n    });\n  },[]);\n  \n  const showRecrd = (record) => (<Container fluid={true} className=\"border shadow-sm p-2 mt-2 mb-3\">\n      <p>\n          {record.name}\n      </p> \n      <div className=\"clearfix p-0 m-0\"></div>\n    </Container>)\n\n  return (!record)? '==' : (\n    <Container className=\"p-3 content-body\">\n       <h5>Focus - {publishCode}</h5>\n       {JSON.stringify(record)}\n       <hr/>\n       {showRecrd(record)}\n    </Container>\n  );\n}\nexport default CommunityResponse;","import React , { useState, useEffect } from 'react';\nimport { Container} from 'react-bootstrap';\nimport { SettingStore } from '../../stores';\n\nfunction DesignHead(props) {\n  const [myRoles, setMyRoles] = useState([]);\n  const [operationRole, setOperationRole] = useState(null);\n  const [tm, setTm] = useState([]);\n  if (tm) {}\n  const roles = SettingStore.getState().allRoles.sort((a, b)=> (b.id) && (a.id) &&  a.id - b.id);\n\n  const changeRole = (code)=> {\n    setOperationRole(code);\n    SettingStore.dispatch({\n      type: 'updateOperationRole',\n      operationRole: code\n    });\n  //  setTm(new Date().getTime());\n  }\n\n  const showDesc = (code) => {\n    for (let o in roles) {\n      if (roles[o].code === code) {\n        return roles[o].desc;\n      }\n    }\n    return '';\n  }\n  const loadRoles = () => {\n    \n    const myR = SettingStore.getState().data.roles;\n    const operationRole = SettingStore.getState().data.operationRole;\n    setOperationRole((!operationRole && !!myR.length) ?  myR[0] : operationRole);\n    setMyRoles(myR.sort((a, b)=> (a.id && (a.id - b.id))));\n  }\n  useEffect(()=> {\n    const handleSubscribe = SettingStore.subscribe(() => {\n      if (SettingStore.getState()._watcher === 'role') {\n        loadRoles();\n      }\n    });\n    loadRoles();\n    return ()=> {\n      handleSubscribe();\n    }\n  }, []);\n/*\n  useEffect(()=> {\n    if (operationRole !== null) {\n      SettingStore.dispatch({\n        type: 'updateOperationRole',\n        operationRole: operationRole\n      });\n    }\n  }, [operationRole])\n*/\n  const opertionAsLink = (v)=> {\n    return 'p-3 mr-1 text-secondary ' + ((operationRole === v) ? 'operation-as-link-checked' : 'operation-as-link');\n  }\n \n\n  const setCurrentRole = ()=> (<Container fluid={true} className=\"p-0 m-0 text-right\">\n      <span className=\"p-2 m-0 text-primary pl-2 border\">\n          <b> Swith role:</b>\n          {roles.map((v, k)=> {\n            return (myRoles.indexOf(v.code) === -1) ? '' : \n            (<span key={k}  onClick={ ()=>{ changeRole(v.code); }}  className={opertionAsLink(v.code)}> {showDesc(v.code)}</span>)\n          })}\n      </span>\n  </Container>)\n\n  return (myRoles.length > 1) ? setCurrentRole() : ''\n}\nexport default DesignHead;","import React , { useState, useEffect } from 'react';\nimport { Container, Button, Badge  } from 'react-bootstrap';\n\nimport { DataStore } from '../../../stores';\n\nimport { Link } from \"react-router-dom\";\nimport { IPFSImg, Engine } from '../../common';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {  faTrashAlt, faEdit } from '@fortawesome/free-solid-svg-icons';\n\nfunction PlateList(props) {\n  const engine = new Engine();\n  const [items, setItems] = useState([]);\n  const [cnt, setCnt] = useState(0);\n  // const [tm, setTm ] = useState(new Date().getTime());\n\n  const showPhotoList = (photos) => {\n    return (<span className=\"clearfix\">\n        {photos.map((o, k)=>{\n          return (<IPFSImg ipfs={o.ipfs} isCache={true} key={k} className=\"float-left m-1 bg-secondary iconsImage\"/>)          \n        })}\n    </span>)\n  }\n  const recordPhotos = (rec) => {\n    let photos = [], secs=['plates', 'cooking', 'ingredients'];\n    for (let i = 0; i < secs.length; i++) {\n      if (rec[secs[i]]) {\n        rec[secs[i]].map((v)=> {\n          photos = [...photos, ...v.photos];\n        })\n      }\n    }\n    return photos;\n  }\n  const deleteRecord = (id, code)=> {\n    engine.loadingOn();\n    engine.saveLocalRecord({\n      type: 'deleteLocal',\n      section:code,\n      data: {id: id}\n    }, (data)=>{\n      loadList();\n      engine.loadingOff();\n    });\n  }\n  \n  const loadList = ()=> {\n    const list = DataStore.getState().data.plates;\n    const cnt = list.length;\n    setItems(list);\n    setCnt(cnt);\n  //  setTm(new Date().getTime());\n  } \n  \n  useEffect(()=> { \n      engine.loadStorageData({}, ()=>{\n        loadList();\n      });\n  }, [])\n\n  const showNothing = ()=> (\n    <Container fluid={true} className=\"rounded p-3 message-box grid-bg\">\n      <h3 className=\"text-secondary m-3 p-3\">There is not plate avaliable.</h3>\n    </Container>\n  );\n  const showList= (cnt)=> {\n    return (<Container fluid={true}  className=\"p-0 m-0\">\n    {items.map((rec, key) => {\n        return !rec ? '' : (\n        <Container fluid={true} key={key} className=\"border shadow-sm p-0 mt-2 mb-3\">\n          <div className=\"float-right mr-2 p-2\">\n            <Button variant=\"link\" as={Link} to={'/editPlate/' + rec.recipeCode + '/'+ rec.id} className=\"p-0 ml-3\">\n              <FontAwesomeIcon size=\"1x\" icon={faEdit} /> Edit\n            </Button>\n            <Button variant=\"link\" onClick={()=>{ deleteRecord(rec.id, 'plates') }} className=\"p-0 ml-3\">\n              <FontAwesomeIcon size=\"1x\" icon={faTrashAlt} /> Delete\n            </Button>\n          </div>\n          <b className=\"float-left p-2 pl-3 pr-3 pb-0 m-0\">{rec.name}</b>\n          <div className=\"clearfix p-0 m-0\"></div>\n          <Container fluid={true}  className=\"p-0 pl-3 pr-3 pb-1\">\n            <div>\n              <p className=\"float-right\" style={{maxWidth:'200px'}}>\n                 {showPhotoList(recordPhotos(rec))}\n              </p>  \n              <span className=\"text-primary\">Plates:</span>\n              {rec.plates.map((v, k)=>{  return v.text })}\n              <br/>\n              <span className=\"text-primary\">Instruction:</span>\n              {rec.cooking.map((v, k)=>{ return v.text })}\n            </div>\n            {(rec.price) && (<span className=\"text-primary\">Price : ${rec.price}</span>)}\n            <div className=\"clearfix p-1 m-0\"></div>\n          </Container>\n        </Container>);\n      })}</Container>);\n  }\n  return (\n    <Container fluid={true} className=\"content-body p-0 m-0\">\n        <h4 className=\"float-left\">Plates</h4>\n        <Badge className=\"float-left ml-1 mr-3 alert-primary\">{cnt}</Badge>\n      <div className=\"clearfix p-0 m-0\"></div>\n      {(cnt) ? showList(cnt) : showNothing()}\n    </Container>\n  );\n}\nexport default PlateList;","\nimport React , { useState, useEffect, useRef} from 'react';\nimport { Container, Form, Button, InputGroup } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPaperclip, faTrashAlt, faTimesCircle } from '@fortawesome/free-solid-svg-icons'\nimport { IPFSImg } from '../../common';\n\nfunction PlateSectioon(props) {\n  const [record, setRecord] = useState(props.record);\n  const inputFileHandle = useRef(null); \n  const uploadFile = (e) => {\n    inputFileHandle.current.click();\n  }\n\n  const handleFileChange = async (e) => {\n    const list = [];\n    for (let i = 0; i <  e.target.files.length; i++) {\n        list.push({base64:await convertBase64(e.target.files[i])});\n        e.target.value = null;\n    }\n    record.photos = [...record.photos, ...list];\n    setRecord(record);\n    syncRec();\n  }\n\n  const removeSection = () => {\n    props.callParent.removeSection(props.idx);\n  }\n\n  const removePhoto = async (key) => {\n    record.photos.splice(key,1);\n    setRecord(record);\n    syncRec();\n  }\n\n  const convertBase64 = (file) => {\n    return new Promise((resolve, reject) => {\n      const fileReader = new FileReader();\n      fileReader.readAsDataURL(file)\n      fileReader.onload = () => {\n        resolve(fileReader.result);\n      }\n      fileReader.onerror = (error) => {\n        reject(error);\n      }\n    })\n  }\n\n  const syncRec = ()=> {\n    props.callParent.syncRec(props.idx, record);\n  }\n\n  const handleTextChange = async (e) => {\n    const rec = record;\n    rec.text=e.target.value;\n    setRecord(rec);\n    syncRec();\n  }\n\n  useEffect(()=> {\n\n  }, []);\n  \n  return (\n    <Container fluid=\"true\" className=\"p-2\">\n      <InputGroup className=\"m-2\">\n        {(record.idx) ? (<InputGroup.Text className=\"bg-light\">{record.idx}</InputGroup.Text>) : ''}\n        <Form.Control as=\"textarea\" defaultValue={(!props.record) ? '' : props.record.text} \n                  rows=\"2\" onChange={handleTextChange}/>\n      </InputGroup>\n      <Form.Control type=\"file\" hidden ref={inputFileHandle} onChange={handleFileChange}/>\n      <div className=\"clearfix p-1\">\n          <div  className=\"float-right\">\n            {props.isdelete && (<Button variant=\"link\" className=\"ml-3\" onClick={removeSection}>\n              <FontAwesomeIcon size=\"1x\" icon={faTrashAlt} className=\"m-0\" /> Remove\n            </Button>)}\n\n            <Button variant=\"link\" className=\"ml-3\" onClick={uploadFile}>\n              <FontAwesomeIcon size=\"1x\" icon={faPaperclip} className=\"m-0\" /> Upload Photo\n            </Button>\n          </div>\n        {record.photos.map((fa, key)=>{\n            return (\n            <div  key={key}  className=\"m-1 rounded shadow sahdow-sm alert-secondary bg-light float-left\">\n\n              <IPFSImg base64={fa.base64} ipfs={fa.ipfs} isCache={true} className=\"iconsImage\" />\n\n              <FontAwesomeIcon size=\"2x\" icon={faTimesCircle} \n                onClick={()=>removePhoto(key)}\n                className=\"m-1 align-bottom\" />\n            </div>\n            )\n          })}\n      </div>\n    </Container>\n  );\n}\nexport default PlateSectioon;\n","import React , { useState, useEffect } from 'react';\nimport { Form, Button,  Row, Col, Container } from 'react-bootstrap';\nimport PlateSection from './PlateSection';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlus, faSave, faUndo } from '@fortawesome/free-solid-svg-icons'\n\nimport { DataStore, SettingStore } from '../../../stores';\nimport { useHistory, useParams } from \"react-router-dom\";\n\nimport { Engine, IPFSEngine, IpfsDoc, DisplayRecipe } from '../../common';\n\nfunction EditPlate(props) {\n  const engine = new Engine();\n  const ipfsEngine = new IPFSEngine();\n  const history = useHistory();\n\n  const [tm, setTm] = useState(new Date().getTime());\n  const [record, setRecord] = useState(null);\n\n  const {id, recipeCode} = useParams();\n  if (tm) {}\n\n  useEffect(()=> {\n    const engine = new Engine();\n    \n    engine.loadStorageData({}, ()=>{\n      console.log(DataStore.getState().data);\n      const idx = DataStore.getState().data.plates.findIndex((v)=> v.id === id);\n      setRecord((id === 'new') ? {\n        id : 'new',\n        recipeCode: recipeCode,\n        name:'plate ' + recipeCode, \n        userId: SettingStore.getState().userId, \n        cooking: [{text:'', photos:[]}], \n        plates:[{idx:'', text:'', photos:[]}]}\n       : (idx === -1) ? false : DataStore.getState().data.plates[idx]\n      );\n    });\n  }, [])\n\n  const exit = ()=> {\n    engine.setOperationRole('supie');\n    history.push('/workshop');\n  } \n  \n  const save = async ()=> {\n    engine.loadingOn();\n    await ipfsEngine.promiseSave(record);\n    console.log(\"DataStore.getState()\", DataStore.getState());\n\n    engine.saveLocalRecord({\n      type: 'updateLocal',\n      section:'plates',\n      data: record\n    }, ()=>{\n      engine.setOperationRole('supie');\n      engine.loadingOff();\n      exit();\n    });\n  }\n\n  const publish = async ()=> {\n    engine.loadingOn();\n    await ipfsEngine.promiseSave(record);\n    ipfsEngine.promisePublish(record,(code)=> {\n      engine.DatabaseApi('community', {\n        action: 'publish',\n        data: {\n          publishCode:  code, \n          docType:      'plate', \n          publisher:    SettingStore.getState().fp, \n          authCode:     SettingStore.getState().data.authInfo.authCode\n        }\n      }, ()=>{\n        engine.loadingOff();\n        exit();\n      } )\n    });\n  }  \n  const removeSection = (section) => {\n    return (idx) => {\n      if (record[section]) {\n        record[section].splice(idx,1)\n        setRecord(record);\n        resetIdx(section);\n        setTm(new Date().getTime())\n      }\n    }\n  }\n  const resetIdx = (section) => {\n    const set = 'ABCDE';\n    if (!record[section]) return true;\n    for (let i = 0; i < record[section].length; i++) {\n      record[section][i].idx = set[i];\n    }\n    setRecord(record);\n  }\n  const addSection = (section)=> {\n    return ()=> {\n      const rec = record;\n      if ((rec[section]) && rec[section].length < 3) {\n        rec[section].push({idx:'', text:'', photos:[]});\n        resetIdx(section)\n        setRecord(rec);\n        setTm(new Date().getTime())\n      }\n    }\n  }\n  const syncRec = (section)=> {\n    return (idx, data) => {\n      const rec = record;\n      if (rec[section]) {\n        rec[section][idx] = data;\n        setRecord(rec);\n        setTm(new Date().getTime())\n      }\n    }\n  }\n  const referenceRecipe = (code)=> {\n    return (!code) ? '': (<Form.Text className=\"border border-secondary  alert-warning p-2 m-0\"\n    style={{height:'6rem',overflowY:'scroll', overflowX:'hidden', inline:'block'}}>\n      <Form.Text><i>Original Recipe</i></Form.Text>\n      <IpfsDoc ipfs={code} tpl={(props)=>(<DisplayRecipe record={props.record} className=\"p-0 m-0\" />)}/>\n    </Form.Text>)\n  }\n\n  const onPriceChange = (e)=> {\n    record.price=e.target.value;\n    setRecord(record);\n  }\n  return (record === null) ? \n  (<Container className=\"p-3 content-body\">\n    Loading ...\n  </Container>)\n  : (!record.id) ? \n    (<Container className=\"p-3 content-body\">\n      <div className=\"alert alert-danger\">Wrong recipe id -{id}-</div>\n    </Container>)\n    : (\n    <Container className=\"p-3 content-body\">\n      <div className=\"p-3 border border-secondary\">\n      <Form>\n        <Form.Group className=\"m-1 ml-2 mb-3\">\n          <Form.Label><b>Plate Design:</b></Form.Label>\n          {referenceRecipe(record.recipeCode)}\n        </Form.Group>\n\n        <div className=\"m-1 ml-2 mb-3\">\n          <b>Plats Description</b> {record.recipeCode}\n          {record.plates.length < 3 && (<Button variant=\"link\" className=\"float-right mr-3 button-link\" onClick={addSection('plates')}>\n            <FontAwesomeIcon size=\"1x\" icon={faPlus}  /> Add a Plate\n          </Button>)}\n\n          {record.plates.map((v, key)=>(<span key={key} >\n          <PlateSection caption={'Section'} key={key}  idx={key} callParent={{syncRec:syncRec('plates'), removeSection: removeSection('plates')}}\n          record = {v}\n          isdelete={(record.plates.length < 2) ? false : true}/></span>))}\n        </div>\n\n        <div className=\"m-1 ml-2\"><b>Cooking Instruction</b></div>\n\n        {record.cooking.map((v, key)=>(<span key={key} >\n          <PlateSection caption={''} key={key}  idx={key} callParent={{syncRec:syncRec('cooking'), removeSection: removeSection('cooking')}} \n          record = {v}\n          isdelete={(record.cooking.length < 2) ? false : true}/></span>))}\n\n        <Form.Group className=\"m-1 ml-2 mb-3\">\n          <Form.Label><b>Plate Price:</b></Form.Label>\n          <Form.Control defaultValue={record.price}  placeholder=\"Input price\" type=\"text\" onChange={onPriceChange} />\n        </Form.Group>\n\n        <Row>\n          <Col xs=\"12\" align=\"center\" className=\"m-1 ml-2\">    \n            <Button  type=\"button\" className=\"btn btn-primary m-1 mr-3\" onClick={save}>\n            <FontAwesomeIcon size=\"1x\" icon={faSave} className=\"m-0\" /> Save\n            </Button>\n            <Button  type=\"button\" className=\"btn btn-primary m-1 mr-3\" onClick={publish}>\n            <FontAwesomeIcon size=\"1x\" icon={faSave} className=\"m-0\" /> Response to Foodie\n            </Button>\n            <Button className=\"btn btn-secondary m-1 mr-3\" onClick={exit}>\n            <FontAwesomeIcon size=\"1x\" icon={faUndo} className=\"m-0\" /> Exit\n            </Button> \n          </Col>\n        </Row>\n      </Form>\n      </div>\n    </Container>\n  );\n}\nexport default EditPlate;\n","import React , { useState, useEffect } from 'react';\nimport { Container} from 'react-bootstrap';\nimport { OperationSection } from '.';\nimport { SettingStore } from '../../stores';\n\nimport { RecipeList } from './recipes';\nimport { PlateList } from './plates';\nimport { Link, useLocation  } from \"react-router-dom\";\n\nfunction Workshop(props) {\n  const [operationRole, setOperationRole] = useState('');\n  const location = useLocation();\n  useEffect(()=> { \n    const handleSubscribe = SettingStore.subscribe(() => {\n      if (SettingStore.getState()._watcher === 'role') {\n       setOperationRole(SettingStore.getState().data.operationRole);\n      }\n    });\n    setOperationRole(SettingStore.getState().data.operationRole);\n    return ()=> {\n      handleSubscribe();\n    }\n  }, []);\n\n  return (\n    <Container className=\"p-3\">{props.tm}\n      <OperationSection/>\n      <div className=\"clearfix p-1 m-0\"></div>\n      {(operationRole === 'foodie') && (<RecipeList/>)}\n      {(operationRole === 'supie') && (<PlateList/>)}\n    </Container>\n  );\n}\nexport default Workshop;","import React , {  useEffect, useState } from 'react';\nimport { Container } from 'react-bootstrap';\nimport { MyCartList } from '../shoppingCart';\nimport { OrderItem, OrderInfo } from '../Orders';\nimport { ShoppingCartOprator, ShoppingCartWatcher } from '../shoppingCart';\nimport { Messagebox } from '../common';\nfunction MyOrder() {\n  const myList = new MyCartList();\n  \n  const [list, setList] = useState([]);\n  const [tm, setTm] = useState(new Date().getTime());\n\n  const ShoppingCartChanged = ()=> {\n    setList(myList.getList());\n    setTm(new Date().getTime());\n  }\n  useEffect(()=> {\n    setList(myList.getList());\n   }, []);\n   return (<Container className=\"mt-3 pt-3\">\n    <ShoppingCartWatcher changed={ShoppingCartChanged}/>\n    <ShoppingCartOprator operater=\"initShoppingCart\" caption=\"Clean up the cart\" className=\"text-primary ml-3\"/>\n    {(!list.length) ? '' : list.map((v, k)=> {\n      return (v === null) ? '' : (<span key={k}>\n        <OrderItem record={v} tm={tm}/>\n      <br/></span>);\n    })}\n    {(!list.length)? (<Messagebox message=\"Empty shopping cart!\" />) : ''}\n  </Container>)\n}\nexport default MyOrder;\n","import React , {  useEffect, useState } from 'react';\nimport { Container} from 'react-bootstrap';\nimport { OrderDetails, OrderInfo } from '../Orders';\nimport { IPFSEngine } from '../common';\nimport { ShoppingCartOprator } from '../shoppingCart';\n\nfunction OrderItem(props) {\n\n  const ipfsEngine = new IPFSEngine();\n\n  const itemCode  = props.record.code;\n  const [ record, setRecord ] = useState({});\n  const [tm, setTm] = useState(0);\n\n  const processData = async (code, callback)=>{\n    const p = await ipfsEngine.promiseIpfsJSON(code);\n    callback(p)\n  }\n\n  useEffect(()=> {\n    const p = processData(itemCode, (p)=>{\n      setRecord(p);\n      setTm(new Date().getTime());\n\n    });\n    \n   }, []);\n\n  return (\n    <Container  fluid={true}>\n      <OrderInfo rec={record} itemCode={itemCode} version={tm}/>\n    </Container>\n  );\n}\nexport default OrderItem;\n","\nimport React , { useState, useEffect } from 'react';\nimport { Container, Row, Col, Button, Image } from 'react-bootstrap';\nimport { IPFSImg  } from '../common';\nimport { ShoppingCartOprator } from '../shoppingCart';\n\nfunction OrderInfo(props) {\n  const [record, setRecord] = useState(props.rec);\n  const [photos, setPhotos] = useState([]);\n  const [content, setContent] = useState('');\n  const itemCode = props.itemCode;\n  const getContents = (rec)=>{\n    const list = [];\n    ['cooking', 'ingredients', 'plates'].map((v)=> {\n        const r = (!rec || !rec[v]) ? [] : rec[v];\n        r.map((v2)=>  list.push(v2.text + '; '));\n        return true;\n    });\n    setContent(list.join(' '));\n    \n  }\n  const getImages = (rec)=>{\n    const list = [];\n    ['cooking', 'ingredients', 'plates'].map((v)=> {\n        const r = (!rec || !rec[v]) ? [] : rec[v];\n        r.map((v1) => {\n          const photos = (!v1.photos) ? [] : v1.photos;\n          photos.map((v2)=> {\n            if (v2 && v2.ipfs) {\n              list.push(v2.ipfs);\n            } \n            return true;\n          });\n          return true;\n        })\n        return true;\n    });\n    setPhotos(list);\n  }\n\n  useEffect(()=> {\n    setRecord(props.rec);\n    getImages(props.rec);\n    getContents(props.rec);\n  }, []);\n\n  useEffect(()=> {\n    setRecord(props.rec);\n    getImages(props.rec);\n    getContents(props.rec);\n  }, [props.version]);\n\n  return  (!record.id || !photos[0]) ? '' :  (\n  <Container className=\"p-1\"  fluid={true} >\n    <div className=\"float-right p-2 m-1 border rounded right\">\n      <ShoppingCartOprator code={itemCode} operater=\"minus\" className=\"text-primary mr-3\"/>\n      <ShoppingCartOprator code={itemCode} operater=\"showCount\" className=\"text-primary\"/>\n      <ShoppingCartOprator code={itemCode} operater=\"plus\"  className=\"text-primary ml-3\"/>\n      <ShoppingCartOprator code={itemCode} operater=\"remove\"  className=\"text-primary ml-3\"/>\n      <br/>\n      <ShoppingCartOprator code={itemCode} operater=\"showTotal\" price={record.price} className=\"text-primary\"/>\n    </div>\n    <Container className=\"p-1\"  fluid={true} >\n      <Row>\n        <Col xs={1} style={{textAlign: \"center\"}} className=\"p-0\">\n          <div  className=\"border bg-light\">\n          <IPFSImg ipfs={photos[0]} isCache={true} className=\"m-3\" \n           style={{maxWidth:'48px', maxHeight:'48px', objectFit: 'cover'}}/>\n          </div>\n        </Col>\n        <Col xs={11}  className=\"p-3\">\n          {record && record.name}\n        </Col>\n        <br/>\n      </Row>\n    </Container>\n     <div className=\"clearfix p-0 m-0\"></div>\n  </Container>\n  );\n}\nexport default OrderInfo;\n","import React , { useState, useEffect } from 'react';\nimport { Container, Form, Button, Alert } from 'react-bootstrap';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSearch } from '@fortawesome/free-solid-svg-icons';\n\nimport { AddressInput, Engine } from '../common/';\nimport { SettingStore } from '../../stores';\n\nfunction BecomeFoodie(props) {\n  const engine = new Engine();\n  const [address, setAddress] = useState('');\n  const [description, setDescription] = useState('');\n  const [phone, setPhone] = useState('');\n  const [success, setSuccess] = useState(false);\n\n  const submitApplication = ()=> {\n    engine.loadingOn();\n    engine.DatabaseApi('application', {\n      action: 'save',\n      data: {\n        type:'foodie', \n        visitorId: SettingStore.getState().fp, \n        address:address,\n        phone : phone,\n        description: description\n      }\n    }, ()=>{\n      engine.loadingOff();\n      setSuccess(true);\n    });\n  }\n  const onDescriptionChanged = (e)=> {\n    setDescription(e.target.value);\n  }\n  const onPhoneChanged = (e)=> {\n    const patt = /^\\(?([0-9]{3})\\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;\n    if (patt.test(e.target.value)) {\n      e.target.value = e.target.value.replace(patt, '($1)$2-$3');\n      setPhone(e.target.value.replace(patt, '($1)$2-$3'));\n    } else {\n      setPhone('');\n    }\n  }\n  const isSubmit = () => {\n    return (!address) ? false : true;\n  }\n\n  useEffect(()=> {}, []);\n\n  const successForm = () =>  (\n    <Container>\n      <Alert variant=\"success mt-3\">\n        <Alert.Heading>You application submitted!</Alert.Heading>\n          <span>\n            You might become a foodie automatically upon our AI valification. or you will be contacted sooner. \n          </span>\n        </Alert>\n    </Container>);\n\n  const inputForm = () => (\n   <Container className=\"mb-3 pb-3\">\n      <Alert variant=\"secondary mt-3\">\n        <Alert.Heading>If you have the Foodie role:</Alert.Heading>\n        <ul>\n          <li>You can be a housewife who wants to share her cooking hobby with neighbours, \n            while making a side income. Foodie can be a restaurant owner, to extend their business objectives. </li>\n          <li>You needs to provide a real address (not PO box), can create receipts, and contact supplies. </li>\n          <li>You drives the following workflow: create receipt -> contact supplier and confirm the plate -> \n            publish the plate to “menu”</li>\n          <li>You authentication requires a barcode provided by DishFoo via mail. \n            Once the barcode is scanned, then Foodie can publish the plate to the menu.</li>\n        </ul>\n      </Alert>\n      <Form>\n      <Form.Group>\n          <Form.Label><b>Foodie Address:</b> <span className=\"form_notice_info\">* Required</span></Form.Label>\n          <AddressInput passAddress={setAddress} defaultValue={address}/>\n        </Form.Group>\n        <Form.Group>\n          <Form.Label><b>Application Description:</b> <span className=\"form_notice_info\">(Option)</span> </Form.Label>\n          <Form.Control defaultValue={description} placeholder=\"Input Description\" as=\"textarea\" \n            rows=\"3\"\n            onChange={onDescriptionChanged } />\n        </Form.Group>\n        <Form.Group>\n          <Form.Label><b>Contact Phone:</b> <span className=\"form_notice_info\">(Option)</span></Form.Label>\n          <Form.Control defaultValue={phone} placeholder=\"Input Contact Phone\" as=\"textarea\" \n            rows=\"1\"\n            onChange={onPhoneChanged} />\n        </Form.Group>\n        <Button className=\"btn btn-info m-0 mr-3\" disabled={!isSubmit()}  onClick={submitApplication}>\n          <FontAwesomeIcon size=\"1x\" icon={faSearch} className=\"m-0\" /> Submit\n        </Button>\n      </Form>\n   </Container>);\n   return (!success) ? inputForm() : successForm();\n}\n\nexport { BecomeFoodie }","import React , { useState, useEffect } from 'react';\nimport { Container, Form, Button, Alert } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCloudUploadAlt } from '@fortawesome/free-solid-svg-icons';\nimport { AddressInput, Engine } from '../common/';\nimport { SettingStore } from '../../stores';\n\nfunction BecomeSupie(props) {\n  const engine = new Engine();\n  const [address, setAddress] = useState('');\n  const [qualification, setQualification] = useState('');\n  const [description, setDescription] = useState('');\n  const [phone, setPhone] = useState('');\n  const [success, setSuccess] = useState(false);\n\n  const submitApplication = ()=> {\n    engine.loadingOn();\n    engine.DatabaseApi('application', {\n      action: 'save',\n      data: {\n        type:'supie', \n        visitorId: SettingStore.getState().fp, \n        address:address, \n        phone : phone,\n        qualification: qualification,\n        description: description\n      }\n    }, ()=>{\n      engine.loadingOff();\n      setSuccess(true);\n    });\n  }\n  const onQualificationChanged = (e)=> {\n    setQualification(e.target.value);\n  }\n  const onDescriptionChanged = (e)=> {\n    setDescription(e.target.value);\n  }\n\n  const isSubmit = () => {\n    return (!phone || !address || !qualification) ? false : true;\n  }\n  const onPhoneChanged = (e)=> {\n    const patt = /^\\(?([0-9]{3})\\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;\n    if (patt.test(e.target.value)) {\n      e.target.value = e.target.value.replace(patt, '($1)$2-$3');\n      setPhone(e.target.value.replace(patt, '($1)$2-$3'));\n    } else {\n      setPhone('');\n    }\n  }\n  useEffect(()=> {}, []);\n\n  const successForm = () =>  (\n    <Container>\n    <Alert variant=\"success mt-3\">\n      <Alert.Heading>You application submitted!</Alert.Heading>\n        <span>\n          You might become a supie automatically upon our AI valification. or you will be contacted sooner. \n        </span>\n      </Alert>\n    </Container>);\n/*\n  const errorBox = () => {\n    const title = (<span className=\"text-success\">You application submitted! </span>)\n    const message = (<span className=\"text-success\">\n    You might become a supie automatically upon our AI valification. or you will be contacted sooner. </span>)\n    return (<alert message={message} title={title} className=\"mt-3\"/>)\n  }\n*/\n  const inputForm = ()=> (\n   <Container className=\"mb-3 pb-3\">\n      <Alert variant=\"secondary mt-3\">\n        <Alert.Heading>If you have the Supie role</Alert.Heading>\n        <ul>\n          <li>You can be grocery stores, farms or restaurants.</li>\n          <li>You can make plate based on receipt and send back to Foodie for validation.</li>\n          <li> You needs to provide a real address (not PD box), can view the receipts from Foodie.</li>\n        </ul>\n      </Alert>\n\n      <Form>\n        <Form.Group>\n          <Form.Label><b>Supie Address:</b> <span className=\"form_notice_info\">* Required</span></Form.Label>\n          <AddressInput passAddress={setAddress} defaultValue={address}/>\n        </Form.Group>\n        <Form.Group>\n          <Form.Label><b>Contact Phone:</b> <span className=\"form_notice_info\">* Required</span></Form.Label>\n          <Form.Control defaultValue={phone} placeholder=\"Input Contact Phone\" as=\"textarea\" \n            rows=\"1\"\n            onChange={onPhoneChanged} />\n        </Form.Group>\n        <Form.Group>\n          <Form.Label><b>Your Qualification:</b> <span className=\"form_notice_info\">* Required</span></Form.Label>\n          <Form.Control defaultValue={qualification} placeholder=\"Input Qualification\" as=\"textarea\" \n            rows=\"1\"\n            onChange={onQualificationChanged } />\n        </Form.Group>\n        <Form.Group>\n          <Form.Label><b>Application Description:</b> <span className=\"form_notice_info\">(Option)</span> </Form.Label>\n          <Form.Control defaultValue={description} placeholder=\"Input Description\" as=\"textarea\" \n            rows=\"3\"\n            onChange={onDescriptionChanged } />\n        </Form.Group>\n        <Button className=\"btn btn-info m-0 mr-3\" disabled={!isSubmit()} onClick={submitApplication}>\n          <FontAwesomeIcon size=\"1x\" icon={faCloudUploadAlt} className=\"m-0\" /> Submit\n        </Button>\n      </Form>\n   </Container>);\n\n   return (!success) ? inputForm() : successForm()\n}\n\nexport { BecomeSupie }","import React , { useEffect } from 'react';\nimport RecipeEdit from './workshop/recipes/RecipeEdit';\nimport MenuItems from './menu/Items';\n\nimport { Switch, Route } from \"react-router-dom\";\nimport { Container } from 'react-bootstrap';\n\nimport { About, Contact, Home } from \"./content\";\nimport { RoleSection } from './common';\nimport  ComingSoon from './content/ComingSoon';\nimport {  CommunityList, CommunityResponse } from './community';\nimport { Setting } from './setting';\n\nimport { Workshop } from \"./workshop\";\nimport {  MyOrders} from \"./Orders\";\nimport {  EditPlate } from './workshop/plates';\nimport { BecomeFoodie, BecomeSupie } from './application';\nimport { AuthBody  }  from './mobileAuth';\n\nfunction Body(props) {\n  useEffect(() => {\n  }, []);\n\n  return (\n    <Container fluid={true} className=\"m-0 p-0\">\n        <Switch>\n\n          <Route exact path=\"/workshop\">\n            <RoleSection roles={['foodie', 'supie']} \n              comp={(<Workshop />)}\n                showException={false} />\n          </Route>\n\n          <Route exact path=\"/community\">\n            <CommunityList/>\n            <RoleSection roles={[['foodie', 'supie']]} \n              comp={<CommunityList/>}\n              showException={false} />\n          </Route>\n\n          <Route  exact path=\"/orders\">\n            <MyOrders/>\n          </Route>\n\n          <Route  exact path=\"/auth\">\n            <AuthBody/>\n          </Route>\n\n          <Route  exact path=\"/editRecipe/:id\">\n            <RecipeEdit/>\n          </Route>\n          \n          <Route  exact path=\"/editRecipe/:recipeCode/:id\">\n            <RecipeEdit/>\n          </Route>\n\n          <Route  exact path=\"/communityResponse/:publishCode\">\n            <CommunityResponse/>\n          </Route>\n\n          <Route  exact path=\"/editPlate/:recipeCode/:id\">\n            <EditPlate/>\n          </Route>\n\n          <Route exact path=\"/becomeFoodie\">\n            {<RoleSection roles={['all']} exroles={['foodie']}\n              comp={<BecomeFoodie/>}\n              showException={false} />}\n          </Route>\n\n          <Route exact path=\"/becomeSupie\">\n            {<RoleSection roles={['all']} exroles={['supie']}\n              comp={<BecomeSupie/>}\n              showException={false} />}\n          </Route>\n          \n\n          <Route  exact path=\"/about\">\n            <About/>\n          </Route>\n          <Route  exact path=\"/contact\">\n            <Contact/>\n          </Route>\n          <Route  exact path=\"/\">\n            <Home/>\n          </Route>\n          <Route  exact path=\"/menus\">\n            <MenuItems/>\n          </Route>\n\n          <Route  exact path=\"/setting\">\n            <Setting/>\n          </Route>\n\n          <Route path=\"/:title\">\n            <Container fluid=\"true\" className=\"p-3 content-body\">\n              <ComingSoon/>\n            </Container>\n          </Route>\n        </Switch>\n    </Container>\n   \n  );\n}\n\nexport default Body;\n","import React , { useEffect, useState } from 'react';\nimport { BrowserRouter as Router, Route, Switch} from \"react-router-dom\";\nimport  Header  from './modules/Header';\nimport  Footer  from './modules/Footer';\nimport  Body from './modules/Body';\nimport { Spinner } from 'react-bootstrap';\nimport { MobileAuth, InfoCatch, ScanSignin } from './modules/mobileAuth'\nimport './App.css';\nimport { useMediaQuery } from 'react-responsive';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { SettingStore } from './stores/';\nimport { Loading, FingerPrinter, InfoHeader } from './modules/common';\n\n\nconst App = (props) => {\n  const fp = new FingerPrinter();\n  const [loadReady, setloadReady] = useState(false);\n\n  const screenModel = {\n    isDesktopOrLaptop : useMediaQuery({ query: '(min-width: 1224px)'}),\n    isBigScreen : useMediaQuery({ query: '(min-width: 1824px)' }),\n    isTabletOrMobile : useMediaQuery({ query: '(max-width: 1224px)' }),\n    isPortrait : useMediaQuery({ query: '(orientation: portrait)' }),\n    isRetina : useMediaQuery({ query: '(min-resolution: 2dppx)' })\n  };\n\n  useEffect(() => {\n    const handleSubscribe = SettingStore.subscribe(() => {\n      if (SettingStore.getState()._watcher === 'afterInit') {\n        setloadReady(true);\n      }\n      return false;\n    }); \n\n    (async()=>{\n      console.log(await fp.load());\n    })();\n    \n    setTimeout(\n      ()=> {\n        console.log('==fp.visitorId==', fp.visitorId);\n        SettingStore.getState().fp = fp.visitorId;\n        console.log(SettingStore.getState().fp);\n      }, 1000\n    )\n    SettingStore.dispatch({ type: 'loadScreenModel',\n      screenModel: screenModel\n    });\n\n    return ()=> {\n      handleSubscribe();\n  }\n  }, []);\n  // localStorage.clear();\n  console.log('called localStorage.clear()');\n\n  const pageLoading = (<InfoHeader comp={(<Spinner animation=\"border\" size=\"md\" className=\"loading-text\"/>)} />);  \n\n  const pageReady = (\n      <Router className=\"p-0 m-0\">\n        <Switch>\n          <Route exact path=\"/MobileAuth/:SocketID\">\n            <MobileAuth/>\n          </Route>\n          <Route exact path=\"/ScanSignin/:RequestID\">\n            <ScanSignin/>\n          </Route>\n          <Route exact path=\"/InfoCatch/:InfoCode\">\n            <InfoCatch/>\n          </Route>\n          <Route>\n            <Header/>\n            <Loading/>\n            <Body/>\n            <Footer/>\n          </Route>\n        </Switch>\n      </Router>)\n\n    return (!loadReady) ? pageLoading : pageReady;\n}\n\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\ndocument._cacheExist = true;\nReactDOM.render(\n  <React.StrictMode>\n    <App/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}